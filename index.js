// section 1 
let section0 = document.getElementById("section0");
let section1 = document.getElementById("section1");
let section2 = document.getElementById("section2");
let section3 = document.getElementById("section3");
let section4 = document.getElementById("section4");
let section5 = document.getElementById("section5");
let section6 = document.getElementById("section6");
let section7 = document.getElementById("section7");
let section8 = document.getElementById("section8");
let section9 = document.getElementById("section9");
let section10 = document.getElementById("section10");
let section11 = document.getElementById("section11");
let section12 = document.getElementById("section12");
let section13 = document.getElementById("section13");
let section14 = document.getElementById("section14");
let section15 = document.getElementById("section15");
let section16 = document.getElementById("section16");
let section17 = document.getElementById("section17");
let section18 = document.getElementById("section18");
let section19 = document.getElementById("section19");

function display1() {
    section1.classList.remove("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display2() {
    section1.classList.add("d-none");
    section2.classList.remove("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display3() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.remove("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display4() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.remove("d-none");
    section5.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display5() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.remove("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display6() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.remove("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display7() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.remove("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");

}

function display8() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.remove("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display9() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.remove("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display10() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.remove("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display11() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.remove("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}


function display12() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.remove("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display13() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.remove("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display14() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.remove("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display15() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.remove("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display16() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.remove("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display17() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.remove("d-none");
    section18.classList.add("d-none");
    section19.classList.add("d-none");
}

function display18() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.remove("d-none");
    section19.classList.add("d-none");
}

function display19() {
    section1.classList.add("d-none");
    section2.classList.add("d-none");
    section3.classList.add("d-none");
    section4.classList.add("d-none");
    section5.classList.add("d-none");
    section6.classList.add("d-none");
    section7.classList.add("d-none");
    section8.classList.add("d-none");
    section9.classList.add("d-none");
    section10.classList.add("d-none");
    section11.classList.add("d-none");
    section12.classList.add("d-none");
    section13.classList.add("d-none");
    section14.classList.add("d-none");
    section15.classList.add("d-none");
    section16.classList.add("d-none");
    section17.classList.add("d-none");
    section18.classList.add("d-none");
    section19.classList.remove("d-none");
}


function setDisplay() {
    const loggedInStatus = localStorage.getItem('loggedIn') === 'true';
    if (loggedInStatus === true) {
        display8();
    } else {
        // User is not logged in, display1() for a regular user
        display1();
    }
    console.log(loggedInStatus);
}









//section 4 User SignUp 



//section 4 User SignUp 
let userSignUpUserName = document.getElementById("userSignUpUserName");
let userSignUpPassword = document.getElementById("userSignUpPassword");
let userSignUpConfirmPassword = document.getElementById("userSignUpConfirmPassword");
let userCreateButton = document.getElementById("userCreateButton");
let invalidUserSignUp = document.getElementById("invalidUserSignUp");




let userSignUpopenEyePassword = document.getElementById("userSignUpopenEyePassword");
let userSignUpcloseEyePassword = document.getElementById("userSignUpcloseEyePassword");
let userSignUpopenEyeConfirmPassword = document.getElementById("uSignUpopenEyeConfirmPassword");
let userSignUpcloseEyeConfirmPassword = document.getElementById("userSignUpcloseEyeConfirmPassword");


let userSignUpPasswordToUser = document.getElementById("userSignUpPasswordToUser");
let userSignUpCoPasswordToUser = document.getElementById("userSignUpCoPasswordToUser");



let emailVerifiedStatus1 = false;



//email verification



let sendOtpButton = document.getElementById("sendOtpButton");
let userSignUpemailIcon = document.getElementById("userSignUpemailIcon");
let userSignUpCheckIcon = document.getElementById("userSignUpCheckIcon");
let userSignUpWrongCheckIcon = document.getElementById("userSignUpWrongCheckIcon");


function otpGenerator1() {
    console.log("hi")
    const email = document.getElementById('userSignUpUserName');
    const otpverify1 = document.getElementsByClassName('otpverify1')[0];

    // Generating random number as OTP;
    let otp_val = Math.floor(Math.random() * 10000);

    let emailbody = `
        <h1>Your Guider user Sign Up</h1><br>
        <h2>Your OTP is </h2>${otp_val}
    `;

    Email.send({
        SecureToken: "75ff0a1b-f9e3-40f1-96b8-451f81ec6a84",
        To: email.value,
        From: "vanamayaswanth321@gmail.com",
        Subject: "This is for user SignUp email verification",
        Body: emailbody
    }).then(
        message => {
            if (message === "OK") {
                alert("OTP sent to your email " + email.value);

                // now making otp input visible
                otpverify1.style.display = "block";
                const otp_inp1 = document.getElementById('otp_inp1');
                const otp_btn1 = document.getElementById('otp-btn1');

                otp_btn1.addEventListener('click', (event) => {
                    event.preventDefault();
                    const enteredOTP = parseInt(otp_inp1.value);
                    if (enteredOTP === otp_val) {
                        alert("Email address verified...");
                        alert("Email address Verified");
                        userSignUpemailIcon.classList.add("d-none");
                        userSignUpCheckIcon.classList.remove("d-none");
                        userSignUpWrongCheckIcon.classList.add("d-none");
                        userSignUpCheckIcon.style.backgroundColor = "green";
                        otpverify1.style.display = "none";
                        emailVerifiedStatus1 = true;
                    } else {
                        alert("Invalid OTP");
                        userSignUpemailIcon.classList.add("d-none");
                        userSignUpCheckIcon.classList.add("d-none");
                        userSignUpWrongCheckIcon.classList.remove("d-none");
                        userSignUpWrongCheckIcon.style.backgroundColor = "red";
                        otpverify1.style.display = "block";
                        emailVerifiedStatus1 = false;
                    }
                });
            }
        }
    );
}






sendOtpButton.addEventListener("click", otpGenerator1);

// Retrieve data from local storage
let userSignUpLocalStorage = localStorage.getItem("userSignUpData1");
let userSignUpData1Array = userSignUpLocalStorage ? JSON.parse(userSignUpLocalStorage) : [];
console.log(userSignUpData1Array);

let userLoginStatus = false;


function updateUserLocalStorage() {
    localStorage.setItem("userSignUpData1", JSON.stringify(userSignUpData1Array));
}

function userSignup(event) {
    event.preventDefault();
    let userSignUpUserNameValue = userSignUpUserName.value;
    let userSignUpPasswordValue = userSignUpPassword.value;
    let userSignUpConfirmPasswordValue = userSignUpConfirmPassword.value;
    let userSignUpnameExists = false;

    for (let user of userSignUpData1Array) {
        if (user.username === userSignUpUserNameValue) {
            userSignUpnameExists = true;
            break;
        }
    }

    if (!userSignUpnameExists && userSignUpPasswordValue === userSignUpConfirmPasswordValue && emailVerifiedStatus1 === true) {
        let userObject = {
            username: userSignUpUserNameValue,
            password: userSignUpPasswordValue
        };
        userSignUpData1Array.push(userObject);
        userSignUpUserNameValue.textContent = "";
        userSignUpPasswordValue.textContent = "";
        invalidUserSignUp.textContent = "";
        updateUserLocalStorage();

        emailVerifiedStatus1 = false;
        alert("Account created successfully!");
        localStorage.setItem('loggedIn', 'true');
        setDisplay();
        display8();


    } else if (!userSignUpnameExists && userSignUpPasswordValue === userSignUpConfirmPasswordValue && emailVerifiedStatus1 === false) {
        invalidUserSignUp.textContent = "Please verify your email before SignUp";
    } else if (!userSignUpnameExists && userSignUpPasswordValue !== userSignUpConfirmPasswordValue) {
        invalidUserSignUp.textContent = "Enter Password and Confirm Password Same";
    } else {
        if (userSignUpnameExists) {
            invalidUserSignUp.textContent = "Username already Exists";
        } else {
            invalidUserSignUp.textContent = "Username already Exists";
        }
    }


}

userCreateButton.addEventListener("click", userSignup);

function uSignUpConfirmPasswordToText() {
    userSignUpopenEyeConfirmPassword.classList.toggle("d-none");
    userSignUpcloseEyeConfirmPassword.classList.toggle("d-none");
    if (userSignUpopenEyeConfirmPassword.classList.contains("d-none")) {
        userSignUpConfirmPassword.type = "text";
    } else {
        userSignUpConfirmPassword.type = "password";
    }
}

userSignUpCoPasswordToUser.addEventListener("click", uSignUpConfirmPasswordToText);

function uSignUpPasswordToText() {
    userSignUpopenEyePassword.classList.toggle("d-none");
    userSignUpcloseEyePassword.classList.toggle("d-none");
    if (userSignUpopenEyePassword.classList.contains("d-none")) {
        userSignUpPassword.type = "text";
    } else {
        userSignUpPassword.type = "password";
    }
}

userSignUpPasswordToUser.addEventListener("click", uSignUpPasswordToText);

userCreateButton.addEventListener("click", userSignup);






// user login 

//section 2 User Login Page




let userLoginStorageData = localStorage.getItem("userSignUpData1");
let userLoginArrayStorageData = userLoginStorageData ? JSON.parse(userLoginStorageData) : [];
console.log(userLoginArrayStorageData);





let userLoginUserName = document.getElementById("userLoginUserName");
let userLoginPassword = document.getElementById("userLoginPassword");
let userLoginButton = document.getElementById("userLoginButton");
let userLoginEye = document.getElementById("userLoginEye");
let userLoginOpenEye = document.getElementById("userLoginOpenEye");
let userLoginCloseEye = document.getElementById("userLoginCloseEye");
let invalidUserLogin = document.getElementById("invalidUserLogin");

function userLogin(event) {
    event.preventDefault();
    let userLoginUserNameValue = userLoginUserName.value;
    let userLoginPasswordValue = userLoginPassword.value;



    let usernameExists = false;
    let passwordCorrect = false;

    for (let user of userLoginArrayStorageData) {
        if (user.username === userLoginUserNameValue) {
            usernameExists = true;

            if (user.password === userLoginPasswordValue) {
                passwordCorrect = true;
                break;
            }
        }
    }

    if (usernameExists && passwordCorrect) {
        invalidUserLogin.textContent = "";
        userLoginUserNameValue.textContent = "";
        invalidUserLogin.textContent = "";
        alert("accounts");
        localStorage.setItem('loggedIn', 'true');
        setDisplay();
        display8();


    } else if (userLoginUserNameValue === "" || userLoginPasswordValue === "") {
        invalidUserLogin.textContent = "Enter Username and Password";
    } else if (!usernameExists) {
        invalidUserLogin.textContent = "Invalid username. Please go to signup.";

    } else {
        invalidUserLogin.textContent = "Incorrect password. Please try again.";
    }
}

function userLoginPasswordToText() {
    userLoginOpenEye.classList.toggle("d-none");
    userLoginCloseEye.classList.toggle("d-none");
    if (userLoginOpenEye.classList.contains("d-none")) {
        userLoginPassword.type = "text";

    } else {
        userLoginPassword.type = "password";
    }
}

userLoginEye.addEventListener("click", userLoginPasswordToText);
userLoginButton.addEventListener("click", userLogin);









window.addEventListener('load', setDisplay);





// business signUp

//section5 business SignUp Js


let currentBusinessLogin;
let currentBusinessLogin1;

let businessSignUpUsername = document.getElementById("businessSignUpUsername");
let businessSignUpPassword = document.getElementById("businessSignUpPassword");
let businessSignUpConfirmPassword = document.getElementById("businessSignUpConfirmPassword");
let businessCreateButton = document.getElementById("BusinessCreateAccount");
let invalidBusinessSignUp = document.getElementById("invalidBusinessSignUp");




let businessSignUpopenEyePassword = document.getElementById("businessSignUpopenEyePassword");
let businessSignUpcloseEyePassword = document.getElementById("businessSignUpcloseEyePassword");
let businessSignUpopenEyeConfirmPassword = document.getElementById("businessUpopenEyeConfirmPassword");
let businessSignUpcloseEyeConfirmPassword = document.getElementById("businessSignUpcloseEyeConfirmPassword");


let businessSignUpPasswordToUser = document.getElementById("businessSignUpPasswordToUser");
let businessSignUpCoPasswordToUser = document.getElementById("businessSignUpCoPasswordToUser");



let emailVerifiedStatus = false;



//email verification



let sendOtpButton1 = document.getElementById("sendOtpButton1");
let BusinessSignUpemailIcon = document.getElementById("BusinessSignUpemailIcon");
let businessSignUpCheckIcon = document.getElementById("businessSignUpCheckIcon");
let businessSignUpwrongCheckIcon = document.getElementById("businessSignUpwrongCheckIcon");


function otpGenerator() {
    const email = document.getElementById('businessSignUpUsername');
    const otpverify = document.getElementsByClassName('otpverify')[0];

    // Generating random number as OTP;
    let otp_val = Math.floor(Math.random() * 10000);

    let emailbody = `
        <h1>Your Guider business Sign Up</h1> <br>
        <h2>Your OTP is </h2>${otp_val}
    `;

    Email.send({
        SecureToken: "75ff0a1b-f9e3-40f1-96b8-451f81ec6a84",
        To: email.value,
        From: "vanamayaswanth321@gmail.com",
        Subject: "This is for business SignUp email verification",
        Body: emailbody
    }).then(
        message => {
            if (message === "OK") {
                alert("OTP sent to your email " + email.value);

                // now making otp input visible
                otpverify.style.display = "block";
                const otp_inp = document.getElementById('otp_inp');
                const otp_btn = document.getElementById('otp-btn');

                otp_btn.addEventListener('click', (event) => {
                    event.preventDefault();
                    const enteredOTP = parseInt(otp_inp.value);
                    if (enteredOTP === otp_val) {
                        alert("Email address verified...");
                        BusinessSignUpemailIcon.classList.add("d-none");
                        businessSignUpCheckIcon.classList.remove("d-none");
                        businessSignUpwrongCheckIcon.classList.add("d-none");
                        businessSignUpCheckIcon.style.backgroundColor = "green";
                        otpverify.style.display = "none";
                        emailVerifiedStatus = true;
                    } else {
                        alert("Invalid OTP");
                        BusinessSignUpemailIcon.classList.add("d-none");
                        businessSignUpCheckIcon.classList.add("d-none");
                        businessSignUpwrongCheckIcon.classList.remove("d-none");
                        businessSignUpwrongCheckIcon.style.backgroundColor = "red";
                        otpverify.style.display = "block";
                        emailVerifiedStatus = false;
                    }
                });
            }
        }
    );
}






sendOtpButton1.addEventListener("click", otpGenerator);

// Retrieve data from local storage




let businessSignUpLocalStorage = localStorage.getItem("businessSignUpData");
let businessSignUpDataArray = businessSignUpLocalStorage ? JSON.parse(businessSignUpLocalStorage) : [];
console.log(businessSignUpDataArray);

function updateBusinessLocalStorage() {
    localStorage.setItem("businessSignUpData", JSON.stringify(businessSignUpDataArray));
}

function BusinessCreateAccounted(event) {
    event.preventDefault();
    let businessSignUpUserValue = businessSignUpUsername.value;
    let businessPassValue = businessSignUpPassword.value;
    let businessConfirmPassValue = businessSignUpConfirmPassword.value;
    let usernameExists = false;

    for (let user of businessSignUpDataArray) {
        if (user.username === businessSignUpUserValue) {
            usernameExists = true;
            break;
        }
    }

    if (!usernameExists && businessPassValue === businessConfirmPassValue && emailVerifiedStatus === true) {
        let object = {
            username: businessSignUpUserValue,
            password: businessPassValue
        };
        businessSignUpDataArray.push(object);
        currentBusinessLogin1 = businessSignUpUsername.value;
        businessSignUpUsername.value = "";
        businessSignUpPassword.value = "";
        businessSignUpConfirmPassword.value = "";
        invalidBusinessSignUp.textContent = "";
        updateBusinessLocalStorage();
        emailVerifiedStatus = false;

        alert("Business account created successfully!");
        display6();
        // Make sure display6() is correctly implemented if it is used here
        // display6();
    } else if (!usernameExists && businessPassValue === businessConfirmPassValue) {
        invalidBusinessSignUp.textContent = "Please verify your email before SignUp";
    } else {
        if (usernameExists) {
            invalidBusinessSignUp.textContent = "This username is already taken.";
        } else {
            invalidBusinessSignUp.textContent = "Passwords do not match.";
        }
    }
    console.log(businessSignUpDataArray);
}


businessCreateButton.addEventListener("click", BusinessCreateAccounted);

function businessSignUpConfirmPasswordToText() {
    businessSignUpopenEyeConfirmPassword.classList.toggle("d-none");
    businessSignUpcloseEyeConfirmPassword.classList.toggle("d-none");
    if (businessSignUpopenEyeConfirmPassword.classList.contains("d-none")) {
        businessSignUpConfirmPassword.type = "text";
    } else {
        businessSignUpConfirmPassword.type = "password";
    }
}

businessSignUpCoPasswordToUser.addEventListener("click", businessSignUpConfirmPasswordToText);

function businessSignUpPasswordToText() {
    businessSignUpopenEyePassword.classList.toggle("d-none");
    businessSignUpcloseEyePassword.classList.toggle("d-none");
    if (businessSignUpopenEyePassword.classList.contains("d-none")) {
        businessSignUpPassword.type = "text";
    } else {
        businessSignUpPassword.type = "password";
    }
}

businessSignUpPasswordToUser.addEventListener("click", businessSignUpPasswordToText);








// section 3 business login




let businessLoginUserName = document.getElementById("businessLoginUserName");
let businessLoginPassword = document.getElementById("businessLoginPassword");
let businessLoginButton = document.getElementById("businessLoginButton");
let invalidBusiness = document.getElementById("invalidBusiness");

let businessLoginEyeOpen = document.getElementById("businessLoginEyeOpen");
let businessLoginEyeClose = document.getElementById("businessLoginEyeClose");

let businessLoginPasswordToUser = document.getElementById("businessLoginPasswordToUser");


function passwordToText() {
    businessLoginEyeOpen.classList.toggle("d-none");
    businessLoginEyeClose.classList.toggle("d-none");
    if (businessLoginEyeClose.classList.contains('d-none')) {
        businessLoginPassword.type = "password";
    } else {
        businessLoginPassword.type = "text";
    }
}

businessLoginPasswordToUser.addEventListener("click", passwordToText);

function businessLogin(event) {
    event.preventDefault();
    let businessLoginUserNameValue = businessLoginUserName.value;
    let businessLoginPasswordValue = businessLoginPassword.value;
    let storedbusinessData = localStorage.getItem("businessSignUpData");
    let array = storedbusinessData ? JSON.parse(storedbusinessData) : [];

    let usernameExists = false;
    let passwordCorrect = false;

    for (let user of array) {
        if (user.username === businessLoginUserNameValue) {
            usernameExists = true;

            if (user.password === businessLoginPasswordValue) {
                passwordCorrect = true;
                break; // Exit the loop if the username and password are correct
            }
        }
    }


    if (usernameExists && passwordCorrect) {
        alert("Account successfully login");
        currentBusinessLogin = businessLoginUserNameValue;
        currentBusinessLogin1 = businessLoginUserNameValue;
        display6();

    } else if (!usernameExists) {
        invalidBusiness.textContent = "Invalid username. Please go to signup.";
        invalidBusiness.classList.add("invalidBusiness1");


    } else if (businessLoginUserNameValue === "" || businessLoginPasswordValue === "") {
        invalidBusiness.textContent = "Enter the values in the username and password";
    } else {
        invalidBusiness.textContent = "Incorrect password. Please try again.";
        invalidBusiness.classList.add("invalidBusiness1");

    }

}

businessLoginButton.addEventListener("click", businessLogin);












// seventh section business registration for skilled-workers 



let field1 = document.getElementById("field1");
let field2 = document.getElementById("field2");
let field3 = document.getElementById("field3");
let field4 = document.getElementById("field4");
let field5 = document.getElementById("field5");
let field6 = document.getElementById("field6");
let field7 = document.getElementById("citySearchSkilled1");
let field8 = document.getElementById("roadSearchInput");
let field9 = document.getElementById("field9");
let field10 = document.getElementById("searchInputOccupationReg");






document.addEventListener("DOMContentLoaded", function() {
    const workersBusinessDetails = {};

    function updateWorkersBusinessDetails() {
        // Retrieve values using element IDs
        let value1 = document.getElementById("field1").value;
        let value2 = document.getElementById("field2").value;
        let value3 = document.getElementById("field3").value;
        let value4 = document.getElementById("field4").value;
        let value5 = document.getElementById("field5").value;
        let value6 = document.getElementById("field6").value;
        let value7 = document.getElementById("citySearchSkilled1").value;
        let value8 = document.getElementById("roadSearchInput").value;
        let value9 = document.getElementById("field9").value;
        let value10 = document.getElementById("searchInputOccupationReg").value;


        // Update workersBusinessDetails object
        workersBusinessDetails["email"] = value1;
        workersBusinessDetails["name"] = value2;
        workersBusinessDetails["age"] = value3;
        workersBusinessDetails["gender"] = value4;
        workersBusinessDetails["phone no"] = value5;
        workersBusinessDetails["state"] = value6;
        workersBusinessDetails["city"] = value7;
        workersBusinessDetails["areaSkilled1"] = value8;
        workersBusinessDetails["pin code"] = value9;
        workersBusinessDetails["occupation"] = value10;

        workersBusinessDetails["skilledWorkersStatus"] = true;

        // Update businessSignUpDataArray based on email match
        for (let i = 0; i < businessSignUpDataArray.length; i++) {
            if (businessSignUpDataArray[i].username === workersBusinessDetails.email) {
                businessSignUpDataArray[i].workersBusinessDetails =
                    businessSignUpDataArray[i].workersBusinessDetails || {};
                businessSignUpDataArray[i].workersBusinessDetails = workersBusinessDetails;
                console.log(businessSignUpDataArray[i]);
                updateBusinessLocalStorage();
            }
        }
    }

    function handleSubmit(event) {
        event.preventDefault();
        updateWorkersBusinessDetails();
        alert("account created");
        businessHomeSkilled1();
        display16();
        clearSkiled();

    }

    const submitButton = document.getElementById("submitBtn");
    submitButton.addEventListener("click", handleSubmit);

    const formRegCityAll = document.getElementById("formRegCityAll");
    const nextBtn = document.getElementById("nextBtn");
    const backBtn = document.getElementById("backBtn");
    const allInput = formRegCityAll.querySelectorAll(".first input");

    nextBtn.addEventListener("click", (event) => {
        event.preventDefault();
        let allInputsFilled = true;
        allInput.forEach((input) => {
            if (input.value === "") {
                allInputsFilled = false;
            }
        });

        if (allInputsFilled) {
            formRegCityAll.classList.add("secActive");
        } else {
            formRegCityAll.classList.remove("secActive");
        }
    });

    backBtn.addEventListener("click", (event) =>
        formRegCityAll.classList.remove("secActive")
    );
});







// city search 

const citySearchSkilled1 = document.getElementById('citySearchSkilled1');
const citySuggestionsListSkilled1 = document.getElementById('citySuggestionsListSkilled1');

let currentPlaceSkilled1 = {};

function handleCitySuggestionClickSkilled1(place) {
    console.log('Selected City:', place);

    let citySkilled1 = place.address.city || place.address.name;

    citySearchSkilled1.value = citySkilled1;

    currentPlaceSkilled1 = {
        name: place.display_name,
        pincodeSkilled1: place.address.postcode
    };

    let areaSkilled1 = place.display_place;
    let streetSkilled1 = place.address.road;
    let pincodeSkilled1 = place.address.postcode;

    console.log(citySkilled1);
    console.log(areaSkilled1);
    console.log(streetSkilled1);
    console.log(pincodeSkilled1);

    citySuggestionsListSkilled1.innerHTML = '';
}

function debounceCitySkilled1(func, delay) {
    let timeoutIdSkilled1;
    return function() {
        clearTimeout(timeoutIdSkilled1);
        timeoutIdSkilled1 = setTimeout(func, delay);
    };
}

function handleCityInputSkilled1() {
    const searchTermSkilled1 = citySearchSkilled1.value.trim();
    if (searchTermSkilled1.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermSkilled1}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                citySuggestionsListSkilled1.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleCitySuggestionClickSkilled1(place));
                    citySuggestionsListSkilled1.appendChild(li);
                });

                citySuggestionsListSkilled1.style.display = 'block';
            })
            .catch(error => console.error('Error getting city suggestions:', error));
    } else {
        citySuggestionsListSkilled1.style.display = 'none';
    }
}

citySuggestionsListSkilled1.style.display = 'none';

citySearchSkilled1.addEventListener('input', debounceCitySkilled1(handleCityInputSkilled1, 300));

document.addEventListener('click', (event) => {
    if (event.target !== citySearchSkilled1 && event.target !== citySuggestionsListSkilled1) {
        citySuggestionsListSkilled1.style.display = 'none';
    }
});

// Road search

const roadSearchInput = document.getElementById('roadSearchInput');
const roadSearchSuggestionsList = document.getElementById('roadSearchSuggestions');

let currentPlaceSkilled11 = {};

function handleRoadSuggestionClick(place) {
    console.log('Selected Road:', place);

    let areaSkilled1 = place.display_place;

    roadSearchInput.value = areaSkilled1;

    currentPlaceSkilled11 = {
        name: place.display_name,
        pincodeSkilled1: place.address.postcode
    };

    let city = place.address.city || place.address.name;
    let streetSkilled1 = place.address.road;
    let pincodeSkilled1 = place.address.postcode;

    console.log(city);
    console.log(areaSkilled1);
    console.log(streetSkilled1);
    console.log(pincodeSkilled1);

    roadSearchSuggestionsList.innerHTML = '';
}

function debounceRoad(func, delay) {
    let timeoutIdSkilled1;
    return function() {
        clearTimeout(timeoutIdSkilled1);
        timeoutIdSkilled1 = setTimeout(func, delay);
    };
}

function handleRoadInput() {
    const searchTermSkilled1 = roadSearchInput.value.trim();
    if (searchTermSkilled1.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermSkilled1}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                roadSearchSuggestionsList.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleRoadSuggestionClick(place));
                    roadSearchSuggestionsList.appendChild(li);
                });

                roadSearchSuggestionsList.style.display = 'block';
            })
            .catch(error => console.error('Error getting road suggestions:', error));
    } else {
        roadSearchSuggestionsList.style.display = 'none';
    }
}

roadSearchSuggestionsList.style.display = 'none';

roadSearchInput.addEventListener('input', debounceRoad(handleRoadInput, 300));

document.addEventListener('click', (event) => {
    if (event.target !== roadSearchInput && event.target !== roadSearchSuggestionsList) {
        roadSearchSuggestionsList.style.display = 'none';
    }
});







//occupation search

const arrayOccupationReg = ["electrician", "plumber", "bike mechanic", "car mechanic", "painter", "ac mechanic", "bike and car mechanic", "driver", "welder", "auto mechanic", "daily-wage-worker"];
const searchInputOccupationReg = document.getElementById("searchInputOccupationReg");
const suggestionsContainerOccupationReg = document.getElementById("suggestionsContainerOccupationReg");

document.addEventListener('click', function(event) {
    const clickedSuggestion = event.target.closest('.suggestion-itemOccupationReg');
    if (clickedSuggestion) {
        searchInputOccupationReg.value = clickedSuggestion.textContent;
        suggestionsContainerOccupationReg.style.display = 'none';
    } else if (!event.target.closest('#searchInputOccupationReg') && !event.target.closest('#suggestionsContainerOccupationReg')) {
        suggestionsContainerOccupationReg.style.display = 'none';
    }
});

function handleOccupationSuggestionClick(suggestion) {
    searchInputOccupationReg.value = suggestion;
    suggestionsContainerOccupationReg.style.display = 'none';
}

function updateOccupationSuggestions(filteredSuggestions) {
    if (filteredSuggestions.length > 0) {
        const suggestionList = filteredSuggestions.map(suggestion => `<div class="suggestion-itemOccupationReg" onclick="handleOccupationSuggestionClick('${suggestion}')">${suggestion}</div>`).join('');
        suggestionsContainerOccupationReg.innerHTML = suggestionList;
        suggestionsContainerOccupationReg.style.display = 'block';
    } else {
        suggestionsContainerOccupationReg.style.display = 'none';
    }
}

function showSuggestionsOccupationReg() {
    const inputValue = searchInputOccupationReg.value.toLowerCase();
    const filteredSuggestions = arrayOccupationReg.filter(suggestion => suggestion.toLowerCase().includes(inputValue));
    updateOccupationSuggestions(filteredSuggestions);
}



// user service page

function logout() {
    localStorage.setItem('loggedIn', 'false');
    setDisplay();
    console.log("hi");
}



// section 9


// Home Container
let homeContainerSkilled = document.getElementById("homeContainerSkilled");

// Function to Create skilledCards
function skilledCards(item) {
    let div1 = document.createElement("div");
    div1.classList.add("card21", "d-flex", "flex-row", "m-2");
    homeContainerSkilled.appendChild(div1);

    let div2 = document.createElement("div");
    div1.appendChild(div2);

    let ionIcon = document.createElement("ion-icon");
    ionIcon.setAttribute('name', 'person-circle-outline');
    ionIcon.classList.add("image");
    div2.appendChild(ionIcon);

    let div3 = document.createElement("div");
    div3.classList.add("ml-3");
    div1.appendChild(div3);

    let span1 = document.createElement("span");
    span1.classList.add("homeCardHead");
    span1.textContent = item.workersBusinessDetails.name;
    div3.appendChild(span1);

    let break1 = document.createElement("br");
    div3.appendChild(break1);

    let span2 = document.createElement("span");
    span2.textContent = item.workersBusinessDetails["phone no"];
    div3.appendChild(span2);

    let break2 = document.createElement("br");
    div3.appendChild(break2);

    let span3 = document.createElement("span");
    span3.textContent = item.workersBusinessDetails.occupation;
    div3.appendChild(span3);

    let break3 = document.createElement("br");
    div3.appendChild(break3);

    let span4 = document.createElement("span");
    span4.textContent = item.workersBusinessDetails.city + " " + item.workersBusinessDetails.areaSkilled1 + " " + item.workersBusinessDetails["pin code"];
    div3.appendChild(span4);
}

// Display All skilledCards Initially
function displayAllskilledCardsSkilled() {
    for (let item of businessSignUpDataArray) {
        if (item.workersBusinessDetails !== undefined) {
            skilledCards(item);
        }
    }
}

// Function to Display Filtered skilledCards
// Function to Display Filtered skilledCards
function displayFilteredskilledCardsSkilled(selectedCitySkilled, selectedOccupationSkilled) {
    console.log("Selected City:", selectedCitySkilled);
    console.log("Selected Occupation:", selectedOccupationSkilled);

    const cityFilteredArraySkilled = businessSignUpDataArray.filter(item =>
        item.workersBusinessDetails &&
        item.workersBusinessDetails.city &&
        selectedCitySkilled.toLowerCase().includes(item.workersBusinessDetails.city.toLowerCase())
    );

    console.log("City Filtered Array:", cityFilteredArraySkilled);

    homeContainerSkilled.innerHTML = '';

    for (let item of cityFilteredArraySkilled) {
        if (item.workersBusinessDetails) {
            console.log("Occupation in Data:", item.workersBusinessDetails.occupation);

            const occupationMatchesSkilled = !selectedOccupationSkilled ||
                (item.workersBusinessDetails.occupation &&
                    item.workersBusinessDetails.occupation.toLowerCase().includes(selectedOccupationSkilled.toLowerCase()));

            console.log("Occupation Matches:", occupationMatchesSkilled);

            if (occupationMatchesSkilled) {
                skilledCards(item);
            }
        }
    }

    // If city search is empty, filter cards in all cards
    if (!selectedCitySkilled) {
        homeContainerSkilled.innerHTML = '';
        for (let item of businessSignUpDataArray) {
            if (item.workersBusinessDetails) {
                console.log("Occupation in Data:", item.workersBusinessDetails.occupation);

                const occupationMatchesSkilled = !selectedOccupationSkilled ||
                    (item.workersBusinessDetails.occupation &&
                        item.workersBusinessDetails.occupation.toLowerCase().includes(selectedOccupationSkilled.toLowerCase()));

                console.log("Occupation Matches:", occupationMatchesSkilled);

                if (occupationMatchesSkilled) {
                    skilledCards(item);
                }
            }
        }
    }
}





// Location Search
const searchInputskilled = document.getElementById('searchInputskilled');
const suggestionsListSkilled = document.getElementById('suggestionsListSkilled');
let currentPlaceHomePageSkilled = {};

function handleSuggestionClickSkilled(place) {
    searchInputskilled.value = `${place.display_name}, ${place.address.postcode}`;

    currentPlaceHomePageSkilled = {
        name: place.display_name,
        pincode: place.address.postcode
    };

    const selectedCitySkilled = place.address.city || place.address.name;
    homeContainerSkilled.innerHTML = '';

    businessSignUpDataArray.forEach(item => {
        if (item.workersBusinessDetails && item.workersBusinessDetails.city.includes(selectedCitySkilled) && item.workersBusinessDetails.skilledWorkersStatus === true) {
            skilledCards(item);
        }
    });

    searchInputOccupationSearch.value = '';

    suggestionsListSkilled.innerHTML = '';
}

function debounceSkilled(func, delay) {
    let timeoutIdSkilled;
    return function() {
        clearTimeout(timeoutIdSkilled);
        timeoutIdSkilled = setTimeout(func, delay);
    };
}

function handleInputSkilled() {
    const searchTermSkilled = searchInputskilled.value.trim();
    if (searchTermSkilled.length >= 2) {
        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermSkilled}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                suggestionsListSkilled.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleSuggestionClickSkilled(place));
                    suggestionsListSkilled.appendChild(li);
                });

                suggestionsListSkilled.style.display = 'block';
            })
            .catch(error => console.error('Error getting suggestions:', error));
    } else {
        suggestionsListSkilled.style.display = 'none';
    }
}

suggestionsListSkilled.style.display = 'none';

searchInputskilled.addEventListener('click', handleInputSkilled);
searchInputskilled.addEventListener('input', debounceSkilled(handleInputSkilled, 300));
searchInputskilled.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        let village = searchInputskilled.value;
        console.log(village);
        if (currentPlaceHomePageSkilled.name && currentPlaceHomePageSkilled.pincode) {
            console.log('Current Place:', currentPlaceHomePageSkilled);
        }

        suggestionsListSkilled.innerHTML = '';
    }
});

document.addEventListener('click', (event) => {
    if (event.target !== searchInputskilled && event.target !== suggestionsListSkilled) {
        suggestionsListSkilled.style.display = 'none';
    }
});

// Occupation Search
const array = ["electrician", "plumber", "bike mechanic", "car mechanic", "painter", "ac mechanic", "bike and car mechanic", "driver", "welder", "auto mechanic", "daily-wage-worker", "tailor"];
const searchInputOccupationSearch = document.getElementById("searchInputOccupationSearch");
const suggestionsOccupationSearchContainer = document.getElementById("suggestionsOccupationSearchContainer");

// Event listener for Occupation Search
searchInputOccupationSearch.addEventListener('input', debounceSkilled(showsuggestionsOccupationSearch, 300));

document.addEventListener('click', function(event) {
    const clickedSuggestion = event.target.closest('.suggestion-item');
    if (clickedSuggestion) {
        searchInputOccupationSearch.value = clickedSuggestion.textContent;
        suggestionsOccupationSearchContainer.style.display = 'none';

        // Filter and display skilledCards based on selected occupation and city
        const selectedOccupationSkilled = searchInputOccupationSearch.value.toLowerCase();
        const selectedCitySkilled = currentPlaceHomePageSkilled.name || '';

        displayFilteredskilledCardsSkilled(selectedCitySkilled, selectedOccupationSkilled);
    } else if (!event.target.closest('#searchInputOccupationSearch') && !event.target.closest('#suggestionsOccupationSearchContainer')) {
        suggestionsOccupationSearchContainer.style.display = 'none';
    }
});

function showsuggestionsOccupationSearch() {
    const inputValue = searchInputOccupationSearch.value.toLowerCase();
    const filteredsuggestionsOccupationSearch = array.filter(suggestion => suggestion.toLowerCase().includes(inputValue));

    if (filteredsuggestionsOccupationSearch.length > 0) {
        const suggestionList = filteredsuggestionsOccupationSearch.map(suggestion => `<div class="suggestion-item">${suggestion}</div>`).join('');
        suggestionsOccupationSearchContainer.innerHTML = suggestionList;
        suggestionsOccupationSearchContainer.style.display = 'block';
    } else {
        suggestionsOccupationSearchContainer.style.display = 'none';
    }
}

// Allow Location
let locationButton = document.getElementById("get-location");
let locationDiv = document.getElementById("location-details");

const showLocation = async (position) => {
    try {
        let timestamp = new Date().getTime();
        let response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json&_=${timestamp}`);

        if (!response.ok) {
            throw new Error(`Error: ${response.status} - ${response.statusText}`);
        }

        let data = await response.json();
        console.log(data);

        let village = data.address.village || 'N/A';
        let road = data.address.road || 'N/A';
        let area1 = data.address.suburb || data.address.neighbourhood || data.address.city_district || 'N/A';
        let pincode1 = data.address.postcode || 'N/A';

        let city = data.address.city;
        if (city === undefined) {
            city = data.address.name;
        }
        let area = data.address.road;
        let pincode = data.address.postcode;

        console.log(city);
        console.log(area);
        console.log(pincode);
    } catch (error) {
        console.error("Error fetching location:", error);
        locationDiv.innerText = "Error fetching location. Please try again later.";
    }
};

const checkError = (error) => {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            locationDiv.innerText = "Please allow access to location.";
            break;
        case error.POSITION_UNAVAILABLE:
            locationDiv.innerText = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            locationDiv.innerText = "The request to get user location timed out.";
            break;
    }
};

locationButton.addEventListener("click", () => {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showLocation, checkError);
    } else {
        locationDiv.innerText = "The browser does not support geolocation.";
    }
});

// Initial Display of All skilledCards
displayAllskilledCardsSkilled();




// section 10



let propertyValue1 = document.getElementById("field1Property");
let propertyValue2 = document.getElementById("field2Property");
let propertyValue3 = document.getElementById("field3Property");
let propertyValue4 = document.getElementById("field4Property");
let propertyValue5 = document.getElementById("field5Property");
let propertyValue6 = document.getElementById("field6Property");
let propertyValue7 = document.getElementById("citySearchProperty");
let propertyValue8 = document.getElementById("roadSearchInputProperty");
let propertyValue9 = document.getElementById("field9Property");
let propertyValue10 = document.getElementById("searchInputOccupationRegProperty");
let propertyValue11 = document.getElementById("field11Property");
let propertyValue12 = document.getElementById("field12Property");


document.addEventListener("DOMContentLoaded", function() {
    const propertyBusinessDetails = {};

    function updatepropertyBusinessDetails() {
        propertyValue1.disabled = false;
        // Retrieve values using element IDs
        propertyValue1 = document.getElementById("field1Property").value;
        propertyValue2 = document.getElementById("field2Property").value;
        propertyValue3 = document.getElementById("field3Property").value;
        propertyValue4 = document.getElementById("field4Property").value;
        propertyValue5 = document.getElementById("field5Property").value;
        propertyValue6 = document.getElementById("field6Property").value;
        propertyValue7 = document.getElementById("citySearchProperty").value;
        propertyValue8 = document.getElementById("roadSearchInputProperty").value;
        propertyValue9 = document.getElementById("field9Property").value;
        propertyValue10 = document.getElementById("searchInputOccupationRegProperty").value;
        propertyValue11 = document.getElementById("field11Property").value;
        propertyValue12 = document.getElementById("field12Property").value;


        console.log(propertyValue1);
        console.log(propertyValue2);

        // Update propertyBusinessDetails object
        propertyBusinessDetails["email"] = propertyValue1;
        propertyBusinessDetails["name"] = propertyValue2;
        propertyBusinessDetails["age"] = propertyValue3;
        propertyBusinessDetails["members"] = propertyValue4;
        propertyBusinessDetails["phoneno"] = propertyValue5;
        propertyBusinessDetails["state"] = propertyValue6;
        propertyBusinessDetails["city"] = propertyValue7;
        propertyBusinessDetails["areaProperty"] = propertyValue8;
        propertyBusinessDetails["pincode"] = propertyValue9;
        propertyBusinessDetails["property"] = propertyValue10;
        propertyBusinessDetails["type"] = propertyValue11;
        propertyBusinessDetails["estimatedcost"] = propertyValue12;
        propertyBusinessDetails["propertyRegistrationStatus"] = true;

        // Update businessSignUpDataArray based on email match
        for (let i = 0; i < businessSignUpDataArray.length; i++) {
            if (businessSignUpDataArray[i].username === propertyBusinessDetails.email) {
                businessSignUpDataArray[i].propertyBusinessDetails =
                    businessSignUpDataArray[i].propertyBusinessDetails || {};
                businessSignUpDataArray[i].propertyBusinessDetails = propertyBusinessDetails;
                console.log(businessSignUpDataArray[i]);
                updateBusinessLocalStorage();
            }
        }
    }

    function handleSubmitProperty(event) {
        event.preventDefault();
        console.log(propertyValue1);
        console.log(propertyValue2);
        updatepropertyBusinessDetails();
        alert("account created");
        businessHomeProperty();
        display17();
        clearProperty();

    }

    const submitButtonProperty = document.getElementById("submitBtnProperty");
    submitButtonProperty.addEventListener("click", handleSubmitProperty);

    const formRegCityAllProperty = document.getElementById("formRegCityAllProperty");
    const nextBtnProperty = document.getElementById("nextBtnProperty");
    const backBtnProperty = document.getElementById("backBtnProperty");
    const allInputProperty = formRegCityAllProperty.querySelectorAll(".first input");

    nextBtnProperty.addEventListener("click", (event) => {
        event.preventDefault();
        let allInputPropertysFilled = true;
        allInputProperty.forEach((input) => {
            if (input.value === "") {
                allInputPropertysFilled = false;
            }
        });

        if (allInputPropertysFilled) {
            formRegCityAllProperty.classList.add("secActive");
        } else {
            formRegCityAllProperty.classList.remove("secActive");
        }
    });

    backBtnProperty.addEventListener("click", () =>
        formRegCityAllProperty.classList.remove("secActive")
    );
});






// city search 

const citySearchProperty = document.getElementById('citySearchProperty');
const citySuggestionsListProperty = document.getElementById('citySuggestionsProperty');

let currentPlaceProperty = {};

function handleCitySuggestionClick(place) {
    console.log('Selected City:', place);

    let cityProperty = place.address.city || place.address.name;

    citySearchProperty.value = cityProperty;

    currentPlaceProperty = {
        name: place.display_name,
        pincodeProperty: place.address.postcode
    };

    let areaProperty = place.display_place;
    let streetProperty = place.address.road;
    let pincodeProperty = place.address.postcode;

    console.log(cityProperty);
    console.log(areaProperty);
    console.log(streetProperty);
    console.log(pincodeProperty);

    citySuggestionsListProperty.innerHTML = '';
}

function debounceCityProperty(func, delay) {
    let timeoutIdProperty;
    return function() {
        clearTimeout(timeoutIdProperty);
        timeoutIdProperty = setTimeout(func, delay);
    };
}

function handleCityInputProperty() {
    const searchTermProperty = citySearchProperty.value.trim();
    if (searchTermProperty.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermProperty}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                citySuggestionsListProperty.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleCitySuggestionClick(place));
                    citySuggestionsListProperty.appendChild(li);
                });

                citySuggestionsListProperty.style.display = 'block';
            })
            .catch(error => console.error('Error getting city suggestions:', error));
    } else {
        citySuggestionsListProperty.style.display = 'none';
    }
}

citySuggestionsListProperty.style.display = 'none';

citySearchProperty.addEventListener('input', debounceCityProperty(handleCityInputProperty, 300));

document.addEventListener('click', (event) => {
    if (event.target !== citySearchProperty && event.target !== citySuggestionsListProperty) {
        citySuggestionsListProperty.style.display = 'none';
    }
});

// Road search

const roadSearchInputProperty = document.getElementById('roadSearchInputProperty');
const roadSearchSuggestionsProperty = document.getElementById('roadSearchSuggestionsProperty');

let currentPlaceProperty1 = {};

function handleRoadSuggestionClickProperty(place) {
    console.log('Selected Road:', place);

    let areaProperty = place.display_place;

    roadSearchInputProperty.value = areaProperty;

    currentPlaceProperty1 = {
        name: place.display_name,
        pincodeProperty: place.address.postcode
    };

    let cityProperty = place.address.city || place.address.name;
    let streetProperty = place.address.road;
    let pincodeProperty = place.address.postcode;

    console.log(cityProperty);
    console.log(areaProperty);
    console.log(streetProperty);
    console.log(pincodeProperty);

    roadSearchSuggestionsProperty.innerHTML = '';
}

function debounceRoadProperty(func, delay) {
    let timeoutIdProperty;
    return function() {
        clearTimeout(timeoutIdProperty);
        timeoutIdProperty = setTimeout(func, delay);
    };
}

function handleRoadInputProperty() {
    const searchTermProperty = roadSearchInputProperty.value.trim();
    if (searchTermProperty.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermProperty}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                roadSearchSuggestionsProperty.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleRoadSuggestionClickProperty(place));
                    roadSearchSuggestionsProperty.appendChild(li);
                });

                roadSearchSuggestionsProperty.style.display = 'block';
            })
            .catch(error => console.error('Error getting road suggestions:', error));
    } else {
        roadSearchSuggestionsProperty.style.display = 'none';
    }
}

roadSearchSuggestionsProperty.style.display = 'none';

roadSearchInputProperty.addEventListener('input', debounceRoadProperty(handleRoadInputProperty, 300));

document.addEventListener('click', (event) => {
    if (event.target !== roadSearchInputProperty && event.target !== roadSearchSuggestionsProperty) {
        roadSearchSuggestionsProperty.style.display = 'none';
    }
});







//   section 11 user property home page 






// Home Container
let homeContainerProperty1 = document.getElementById("homeContainerProperty1");

// Function to Create cardsProperty
function cardsProperty(item) {
    let div1 = document.createElement("div");
    div1.classList.add("card21", "d-flex", "flex-row", "m-2");
    homeContainerProperty1.appendChild(div1);

    let div2 = document.createElement("div");
    div2.classList.add("rent")
    div1.appendChild(div2);

    let ionIcon = document.createElement("img");
    ionIcon.src = "https://i.postimg.cc/ZKqpgH09/1275208-removebg-preview-removebg-preview.png";
    ionIcon.classList.add("image", "mt-3");
    div2.appendChild(ionIcon);

    let div3 = document.createElement("div");
    div3.classList.add("ml-3");
    div1.appendChild(div3);

    let span1 = document.createElement("span");
    span1.classList.add("homeCardHead")
    span1.textContent = item.propertyBusinessDetails.name;
    span1.style.fontFamily = "bree serif"
    div3.appendChild(span1);

    let break1 = document.createElement("br");
    div3.appendChild(break1);

    let span2 = document.createElement("span");
    span2.textContent = item.propertyBusinessDetails.phoneno;
    div3.appendChild(span2);

    let break2 = document.createElement("br");
    div3.appendChild(break2);

    let span3 = document.createElement("span");
    span3.textContent = item.propertyBusinessDetails.property;
    div3.appendChild(span3);

    let break3 = document.createElement("br");
    div3.appendChild(break3);

    let span4 = document.createElement("span");
    span4.textContent = "For " + item.propertyBusinessDetails.type;
    div3.appendChild(span4);

    let break4 = document.createElement("br");
    div3.appendChild(break4);



    let span5 = document.createElement("span");
    span5.textContent = item.propertyBusinessDetails.estimatedcost + "/-";
    div3.appendChild(span5);

    let break5 = document.createElement("br");
    div3.appendChild(break5);


    let span6 = document.createElement("span");
    span6.textContent = item.propertyBusinessDetails.city + " " + item.propertyBusinessDetails.areaProperty + " " + item.propertyBusinessDetails.pincode;
    div3.appendChild(span6);


}

// Display All cardsProperty Initially
function displayAllcardsProperty() {
    for (let item of businessSignUpDataArray) {
        if (item.propertyBusinessDetails !== undefined) {
            console.log(item);
            cardsProperty(item);
        }
    }
}

// Function to Display Filtered cardsProperty
function displayFilteredcardsProperty(selectedCityProperty2, selectedproperty) {
    console.log("Selected City:", selectedCityProperty2);
    console.log("Selected property:", selectedproperty);

    const cityFilteredArrayProperty1 = businessSignUpDataArray.filter(item =>
        item.propertyBusinessDetails &&
        item.propertyBusinessDetails.city &&
        selectedCityProperty2.toLowerCase().includes(item.propertyBusinessDetails.city.toLowerCase())
    );

    console.log("City Filtered Array:", cityFilteredArrayProperty1);

    homeContainerProperty1.innerHTML = '';

    // If city search is empty, filter cards in all cards
    if (!selectedCityProperty2) {
        for (let item of businessSignUpDataArray) {
            if (item.propertyBusinessDetails) {
                console.log("property in Data:", item.propertyBusinessDetails.property);

                const propertyMatches = !selectedproperty ||
                    (item.propertyBusinessDetails.property &&
                        item.propertyBusinessDetails.property.toLowerCase().includes(selectedproperty.toLowerCase()));

                console.log("property Matches:", propertyMatches);

                if (propertyMatches) {
                    cardsProperty(item);
                }
            }
        }
    } else {
        // Otherwise, filter cards based on selected city and property
        for (let item of cityFilteredArrayProperty1) {
            if (item.propertyBusinessDetails) {
                console.log("property in Data:", item.propertyBusinessDetails.property);

                const propertyMatches = !selectedproperty ||
                    (item.propertyBusinessDetails.property &&
                        item.propertyBusinessDetails.property.toLowerCase().includes(selectedproperty.toLowerCase()));

                console.log("property Matches:", propertyMatches);

                if (propertyMatches) {
                    cardsProperty(item);
                }
            }
        }
    }
}





// Location Search
const searchInputProperty2 = document.getElementById('searchInputProperty2');
const suggestionsListProperty2 = document.getElementById('suggestionsListProperty2');
let currentPlaceProperty2 = {};

function handleSuggestionClick(place) {
    searchInputProperty2.value = `${place.display_name}, ${place.address.postcode}`;

    currentPlaceProperty2 = {
        name: place.display_name,
        pincode: place.address.postcode
    };

    const selectedCityProperty2 = place.address.city || place.address.name;
    homeContainerProperty1.innerHTML = '';

    businessSignUpDataArray.forEach(item => {
        if (item.propertyBusinessDetails && item.propertyBusinessDetails.city.includes(selectedCityProperty2) && item.propertyBusinessDetails.propertyRegistrationStatus === true) {
            cardsProperty(item);
        }
    });

    searchInputpropertySearch.value = '';

    suggestionsListProperty2.innerHTML = '';
}

function debounceProperty2(func, delay) {
    let timeoutIdProperty2;
    return function() {
        clearTimeout(timeoutIdProperty2);
        timeoutIdProperty2 = setTimeout(func, delay);
    };
}

function handleInput() {
    const searchTerm = searchInputProperty2.value.trim();
    if (searchTerm.length >= 2) {
        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTerm}`;

        fetch(apiUrl)
            .then(responseProperty2 => responseProperty2.json())
            .then(data => {
                suggestionsListProperty2.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleSuggestionClick(place));
                    suggestionsListProperty2.appendChild(li);
                });

                suggestionsListProperty2.style.display = 'block';
            })
            .catch(error => console.error('Error getting suggestionsListProperty2:', error));
    } else {
        suggestionsListProperty2.style.display = 'none';
    }
}

suggestionsListProperty2.style.display = 'none';

searchInputProperty2.addEventListener('click', handleInput);
searchInputProperty2.addEventListener('input', debounceProperty2(handleInput, 300));
searchInputProperty2.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        let village = searchInputProperty2.value;
        console.log(village);
        if (currentPlaceProperty2.name && currentPlaceProperty2.pincode) {
            console.log('Current Place:', currentPlaceProperty2);
        }

        suggestionsListProperty2.innerHTML = '';
    }
});

document.addEventListener('click', (event) => {
    if (event.target !== searchInputProperty2 && event.target !== suggestionsListProperty2) {
        suggestionsListProperty2.style.display = 'none';
    }
});

// property Search
const arrayProperty = ["House", "Shop", "Property"];
const searchInputpropertySearch = document.getElementById("searchInputpropertySearch");
const suggestionsOccupationSearchContainerProperty2 = document.getElementById("suggestionsOccupationSearchContainerProperty2");

// Event listener for property Search
// Event listener for property Search
searchInputpropertySearch.addEventListener('input', debounceProperty2(showsearchInputProperty2OccupationSearch, 300));




document.addEventListener('click', function(event) {
    const clickedSuggestion = event.target.closest('.suggestion-item');
    if (clickedSuggestion) {
        searchInputpropertySearch.value = clickedSuggestion.textContent;
        suggestionsOccupationSearchContainerProperty2.style.display = 'none';

        // Filter and display cardsProperty based on selected property and city
        const selectedproperty = searchInputpropertySearch.value.toLowerCase();
        const selectedCityProperty2 = currentPlaceProperty2.name || '';

        displayFilteredcardsProperty(selectedCityProperty2, selectedproperty);
    } else if (!event.target.closest('#searchInputpropertySearch') && !event.target.closest('#suggestionsOccupationSearchContainerProperty2')) {
        suggestionsOccupationSearchContainerProperty2.style.display = 'none';
    }
});

function showsearchInputProperty2OccupationSearch() {
    const inputValue = searchInputpropertySearch.value.toLowerCase();
    const filteredsuggestionsListProperty2propertySearch = arrayProperty.filter(suggestion => suggestion.toLowerCase().includes(inputValue));

    if (filteredsuggestionsListProperty2propertySearch.length > 0) {
        const suggestionList = filteredsuggestionsListProperty2propertySearch.map(suggestion => `<div class="suggestion-item">${suggestion}</div>`).join('');
        suggestionsOccupationSearchContainerProperty2.innerHTML = suggestionList;
        suggestionsOccupationSearchContainerProperty2.style.display = 'block';
    } else {
        suggestionsOccupationSearchContainerProperty2.style.display = 'none';
    }
}

// Allow Location
let locationButtonProperty2 = document.getElementById("locationButtonProperty2");
let locationDivProperty2 = document.getElementById("locationDivProperty2");

const showLocationProperty2 = async (position) => {
    try {
        let timestampProperty2 = new Date().getTime();
        let responseProperty2 = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json&_=${timestampProperty2}`);

        if (!responseProperty2.ok) {
            throw new Error(`Error: ${responseProperty2.status} - ${responseProperty2.statusText}`);
        }

        let data = await responseProperty2.json();
        console.log(data);

        let village = data.address.village || 'N/A';
        let road = data.address.road || 'N/A';
        let area1 = data.address.suburb || data.address.neighbourhood || data.address.city_district || 'N/A';
        let pincode1 = data.address.postcode || 'N/A';

        let city = data.address.city;
        if (city === undefined) {
            city = data.address.name;
        }
        let area = data.address.road;
        let pincode = data.address.postcode;

        console.log(city);
        console.log(area);
        console.log(pincode);
    } catch (error) {
        console.error("Error fetching location:", error);
        locationDivProperty2.innerText = "Error fetching location. Please try again later.";
    }
};

const checkErrorProperty = (error) => {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            locationDivProperty2.innerText = "Please allow access to location.";
            break;
        case error.POSITION_UNAVAILABLE:
            locationDivProperty2.innerText = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            locationDivProperty2.innerText = "The request to get user location timed out.";
            break;
    }
};

locationButtonProperty2.addEventListener("click", () => {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showLocationProperty2, checkErrorProperty);
    } else {
        locationDivProperty2.innerText = "The browser does not support geolocation.";
    }
});

// Initial Display of All cardsProperty
displayAllcardsProperty();







// section 12 registration for parttime





let valuePartTime1 = document.getElementById("PartTime1");
let valuePartTime2 = document.getElementById("PartTime2");
let valuePartTime3 = document.getElementById("PartTime3");
let valuePartTime4 = document.getElementById("PartTime4");
let valuePartTime5 = document.getElementById("PartTime5");
let valuePartTime6 = document.getElementById("PartTime6");
let valuePartTime7 = document.getElementById("citySearchParttime");
let valuePartTime8 = document.getElementById("roadSearchInputParttime");
let valuePartTime9 = document.getElementById("PartTime9");
let valuePartTime10 = document.getElementById("searchInputOccupationRegParttime");
let valuePartTime11 = document.getElementById("PartTime11");





document.addEventListener("DOMContentLoaded", function() {
    const partTimeBusinessDetails = {};

    function updatepartTimeBusinessDetails() {
        // Retrieve values using element IDs
        valuePartTime1 = document.getElementById("PartTime1").value;
        valuePartTime2 = document.getElementById("PartTime2").value;
        valuePartTime3 = document.getElementById("PartTime3").value;
        valuePartTime4 = document.getElementById("PartTime4").value;
        valuePartTime5 = document.getElementById("PartTime5").value;
        valuePartTime6 = document.getElementById("PartTime6").value;
        valuePartTime7 = document.getElementById("citySearchParttime").value;
        valuePartTime8 = document.getElementById("roadSearchInputParttime").value;
        valuePartTime9 = document.getElementById("PartTime9").value;
        valuePartTime10 = document.getElementById("searchInputOccupationRegParttime").value;
        valuePartTime11 = document.getElementById("PartTime11").value;
        valuePartTime1.disabled = false;



        // Update partTimeBusinessDetails object
        partTimeBusinessDetails["email"] = valuePartTime1;
        partTimeBusinessDetails["specific"] = valuePartTime2;
        partTimeBusinessDetails["shopOrCompanyName"] = valuePartTime3;
        partTimeBusinessDetails["type"] = valuePartTime4;
        partTimeBusinessDetails["phoneno"] = valuePartTime5;
        partTimeBusinessDetails["state"] = valuePartTime6;
        partTimeBusinessDetails["city"] = valuePartTime7;
        partTimeBusinessDetails["area"] = valuePartTime8;
        partTimeBusinessDetails["pincode"] = valuePartTime9;
        partTimeBusinessDetails["education"] = valuePartTime10;
        partTimeBusinessDetails["salary"] = valuePartTime11;
        partTimeBusinessDetails["partTimeBusinessRegistrationStatus"] = true;


        // Update businessSignUpDataArray based on email match
        for (let i = 0; i < businessSignUpDataArray.length; i++) {
            if (businessSignUpDataArray[i].username === partTimeBusinessDetails.email) {
                businessSignUpDataArray[i].partTimeBusinessDetails =
                    businessSignUpDataArray[i].partTimeBusinessDetails || {};
                businessSignUpDataArray[i].partTimeBusinessDetails = partTimeBusinessDetails;
                console.log(businessSignUpDataArray[i]);
                updateBusinessLocalStorage();
            }
        }
    }

    function handleSubmitParttime(event) {
        event.preventDefault();
        updatepartTimeBusinessDetails();
        alert("account created");
        businessHomePartTime();
        display18();
        clearPartTime();
    }

    const submitButtonParttime = document.getElementById("submitButtonParttime");
    submitButtonParttime.addEventListener("click", handleSubmitParttime);

    const formRegCityAllParttime = document.getElementById("formRegCityAllParttime");
    const nextBtnParttime = document.getElementById("nextBtnParttime");
    const backBtnParttime = document.getElementById("backBtnParttime");
    const allInputPartTime = formRegCityAllParttime.querySelectorAll(".first input");

    nextBtnParttime.addEventListener("click", (event) => {
        event.preventDefault();
        let allInputPartTimesFilled = true;
        allInputPartTime.forEach((input) => {
            if (input.value === "") {
                allInputPartTimesFilled = false;
            }
        });

        if (allInputPartTimesFilled) {
            formRegCityAllParttime.classList.add("secActive");
        } else {
            formRegCityAllParttime.classList.remove("secActive");
        }
    });

    backBtnParttime.addEventListener("click", () =>
        formRegCityAllParttime.classList.remove("secActive")
    );
});






// city search 

const citySearchParttime = document.getElementById('citySearchParttime');
const citySuggestionsListPartTime = document.getElementById('citySuggestionsListPartTime');

let currentPlacePartTime = {};

function handleCitySuggestionClickParttime(place) {
    console.log('Selected City:', place);

    let cityParttime = place.address.city || place.address.name;

    citySearchParttime.value = cityParttime;

    currentPlacePartTime = {
        name: place.display_name,
        pincode: place.address.postcode
    };

    let areaParttime = place.display_place;
    let streetParttime = place.address.road;
    let pincodeParttime = place.address.postcode;

    console.log(cityParttime);
    console.log(areaParttime);
    console.log(streetParttime);
    console.log(pincodeParttime);

    citySuggestionsListPartTime.innerHTML = '';
}

function debounceCityParttime(func, delay) {
    let timeoutIdParttime;
    return function() {
        clearTimeout(timeoutIdParttime);
        timeoutIdParttime = setTimeout(func, delay);
    };
}

function handleCityInputParttime() {
    const searchTermParttime = citySearchParttime.value.trim();
    if (searchTermParttime.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermParttime}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                citySuggestionsListPartTime.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleCitySuggestionClickParttime(place));
                    citySuggestionsListPartTime.appendChild(li);
                });

                citySuggestionsListPartTime.style.display = 'block';
            })
            .catch(error => console.error('Error getting city suggestions:', error));
    } else {
        citySuggestionsListPartTime.style.display = 'none';
    }
}

citySuggestionsListPartTime.style.display = 'none';

citySearchParttime.addEventListener('input', debounceCityParttime(handleCityInputParttime, 300));

document.addEventListener('click', (event) => {
    if (event.target !== citySearchParttime && event.target !== citySuggestionsListPartTime) {
        citySuggestionsListPartTime.style.display = 'none';
    }
});

// Road search

const roadSearchInputParttime = document.getElementById('roadSearchInputParttime');
const roadSearchSuggestionsListParttime = document.getElementById('roadSearchSuggestionsListParttime');

let currentPlacePartTime1 = {};

function handleRoadSuggestionClickParttime(place) {
    console.log('Selected Road:', place);

    let areaParttime = place.display_place;

    roadSearchInputParttime.value = areaParttime;

    currentPlacePartTime1 = {
        name: place.display_name,
        pincodeS: place.address.postcode
    };

    let cityParttime = place.address.city || place.address.name;
    let streetParttime = place.address.road;
    let pincodeParttime = place.address.postcode;

    console.log(cityParttime);
    console.log(areaParttime);
    console.log(streetParttime);
    console.log(pincodeParttime);

    roadSearchSuggestionsListParttime.innerHTML = '';
}

function debounceRoadParttime(func, delay) {
    let timeoutIdParttime;
    return function() {
        clearTimeout(timeoutIdParttime);
        timeoutIdParttime = setTimeout(func, delay);
    };
}

function handleRoadInputParttime() {
    const searchTermParttime = roadSearchInputParttime.value.trim();
    if (searchTermParttime.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermParttime}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                roadSearchSuggestionsListParttime.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleRoadSuggestionClickParttime(place));
                    roadSearchSuggestionsListParttime.appendChild(li);
                });

                roadSearchSuggestionsListParttime.style.display = 'block';
            })
            .catch(error => console.error('Error getting road suggestions:', error));
    } else {
        roadSearchSuggestionsListParttime.style.display = 'none';
    }
}

roadSearchSuggestionsListParttime.style.display = 'none';

roadSearchInputParttime.addEventListener('input', debounceRoadParttime(handleRoadInputParttime, 300));

document.addEventListener('click', (event) => {
    if (event.target !== roadSearchInputParttime && event.target !== roadSearchSuggestionsListParttime) {
        roadSearchSuggestionsListParttime.style.display = 'none';
    }
});






//section 13 user home page for part time 






// Home Container
let homeContainerPartTIme = document.getElementById("homeContainerPartTIme");

// Function to Create cardsPartTime
function cardsPartTime(item) {
    let div1 = document.createElement("div");
    div1.classList.add("card21", "d-flex", "flex-row", "m-2");
    homeContainerPartTIme.appendChild(div1);

    let div2 = document.createElement("div");
    div1.appendChild(div2);

    let ionIcon = document.createElement("img");
    ionIcon.src = "https://i.postimg.cc/63Dp6qPW/Breaking-News-removebg-preview.png";
    ionIcon.classList.add("image1", "mt-3");
    div2.appendChild(ionIcon);

    let div3 = document.createElement("div");
    div3.classList.add("ml-3");
    div3.style.fontFamily = "bree serif";
    div1.appendChild(div3);

    let span1 = document.createElement("span");
    span1.classList.add("homeCardHead")
    span1.textContent = item.partTimeBusinessDetails.shopOrCompanyName;
    span1.style.fontFamily = "bree serif";
    div3.appendChild(span1);

    let break1 = document.createElement("br");
    div3.appendChild(break1);

    let span2 = document.createElement("span");
    span2.textContent = item.partTimeBusinessDetails.phoneno;
    span2.style.fontFamily = "bree serif";
    div3.appendChild(span2);

    let break2 = document.createElement("br");
    div3.appendChild(break2);

    let span3 = document.createElement("span");
    span3.textContent = item.partTimeBusinessDetails.type;
    span3.style.fontFamily = "bree serif";
    div3.appendChild(span3);

    let break3 = document.createElement("br");
    div3.appendChild(break3);

    let span4 = document.createElement("span");
    span4.textContent = "For " + item.partTimeBusinessDetails.education;
    span4.style.fontFamily = "bree serif";
    div3.appendChild(span4);

    let break4 = document.createElement("br");
    div3.appendChild(break4);



    let span5 = document.createElement("span");
    span5.textContent = item.partTimeBusinessDetails.specific;
    span5.style.fontFamily = "bree serif";
    div3.appendChild(span5);

    let break5 = document.createElement("br");
    div3.appendChild(break5);

    let span6 = document.createElement("span");
    span6.textContent = item.partTimeBusinessDetails.salary + "/-";
    span6.style.fontFamily = "bree serif";
    div3.appendChild(span6);

    let break6 = document.createElement("br");
    div3.appendChild(break6);

    let span7 = document.createElement("span");
    span7.textContent = "Vacancies: " + item.partTimeBusinessDetails.state;
    span7.style.fontFamily = "bree serif";
    div3.appendChild(span7);

    let break7 = document.createElement("br");
    div3.appendChild(break7);


    let span8 = document.createElement("span");
    span8.textContent = item.partTimeBusinessDetails.city + " " + item.partTimeBusinessDetails.areaProperty + " " + item.partTimeBusinessDetails.pincode;
    span8.style.fontFamily = "bree serif";
    div3.appendChild(span8);


}

// Display All cardsPartTime Initially
function displayAllcardsPartTime() {
    for (let item of businessSignUpDataArray) {
        if (item.partTimeBusinessDetails !== undefined) {
            console.log(item);
            cardsPartTime(item);
        }
    }
}

// Function to Display Filtered cardsPartTime
function displayFilteredcardsPartTime(selectedCityPartTime, selectedPartTime) {
    console.log("Selected City:", selectedCityPartTime);
    console.log("Selected Type:", selectedPartTime);

    const cityFilteredArrayPartTime = businessSignUpDataArray.filter(item =>
        item.partTimeBusinessDetails &&
        item.partTimeBusinessDetails.city &&
        selectedCityPartTime.toLowerCase().includes(item.partTimeBusinessDetails.city.toLowerCase())
    );

    console.log("City Filtered Array:", cityFilteredArrayPartTime);

    homeContainerPartTIme.innerHTML = '';

    // If city search is empty, filter cards in all cards
    if (!selectedCityPartTime) {
        for (let item of businessSignUpDataArray) {
            if (item.partTimeBusinessDetails) {
                console.log("Type in Data:", item.partTimeBusinessDetails.type);

                const PartTimeMatches = !selectedPartTime ||
                    (item.partTimeBusinessDetails.type &&
                        item.partTimeBusinessDetails.type.toLowerCase().includes(selectedPartTime.toLowerCase()));

                console.log("Type Matches:", PartTimeMatches);

                if (PartTimeMatches) {
                    cardsPartTime(item);
                }
            }
        }
    } else {
        // Otherwise, filter cards based on selected city and type
        for (let item of cityFilteredArrayPartTime) {
            if (item.partTimeBusinessDetails) {
                console.log("Type in Data:", item.partTimeBusinessDetails.type);

                const PartTimeMatches = !selectedPartTime ||
                    (item.partTimeBusinessDetails.type &&
                        item.partTimeBusinessDetails.type.toLowerCase().includes(selectedPartTime.toLowerCase()));

                console.log("Type Matches:", PartTimeMatches);

                if (PartTimeMatches) {
                    cardsPartTime(item);
                }
            }
        }
    }
}







// Location Search
const searchInputPartTime = document.getElementById('searchInputPartTime');
const suggestionsListPartTime = document.getElementById('suggestionsListPartTime');
let currentPlacePartTime5 = {};

function handleSuggestionClickPartTime(place) {
    searchInputPartTime.value = `${place.display_name}, ${place.address.postcode}`;

    currentPlacePartTime5 = {
        name: place.display_name,
        pincode: place.address.postcode
    };

    const selectedCityPartTime = place.address.city || place.address.name;
    homeContainerPartTIme.innerHTML = '';

    businessSignUpDataArray.forEach(item => {
        if (item.partTimeBusinessDetails && item.partTimeBusinessDetails.city.includes(selectedCityPartTime) && item.partTimeBusinessDetails.partTimeBusinessRegistrationStatus === true) {
            cardsPartTime(item);
        }
    });

    searchInputPartTimeSearch.value = '';

    suggestionsListPartTime.innerHTML = '';
}

function debouncePartTime(func, delay) {
    let timeoutIdPartTime;
    return function() {
        clearTimeout(timeoutIdPartTime);
        timeoutIdPartTime = setTimeout(func, delay);
    };
}

function handleInputPartTime() {
    const searchTermPartTime = searchInputPartTime.value.trim();
    if (searchTermPartTime.length >= 2) {
        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermPartTime}`;

        fetch(apiUrl)
            .then(responsePartTime => responsePartTime.json())
            .then(data => {
                suggestionsListPartTime.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleSuggestionClickPartTime(place));
                    suggestionsListPartTime.appendChild(li);
                });

                suggestionsListPartTime.style.display = 'block';
            })
            .catch(error => console.error('Error getting suggestionsListPartTime:', error));
    } else {
        suggestionsListPartTime.style.display = 'none';
    }
}

suggestionsListPartTime.style.display = 'none';

searchInputPartTime.addEventListener('click', handleInputPartTime);
searchInputPartTime.addEventListener('input', debouncePartTime(handleInputPartTime, 300));
searchInputPartTime.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        let village = searchInputPartTime.value;
        console.log(village);
        if (currentPlacePartTime5.name && currentPlacePartTime5.pincode) {
            console.log('Current Place:', currentPlacePartTime5);
        }

        suggestionsListPartTime.innerHTML = '';
    }
});

document.addEventListener('click', (event) => {
    if (event.target !== searchInputPartTime && event.target !== suggestionsListPartTime) {
        suggestionsListPartTime.style.display = 'none';
    }
});

// property Search
const arrayPartTime = ["Part TIme", "Full Time"];
const searchInputPartTimeSearch = document.getElementById("searchInputPartTimeSearch");
const suggestionsOccupationSearchContainerPartTime = document.getElementById("suggestionsOccupationSearchContainerPartTime");

// Event listener for property Search
// Event listener for property Search
searchInputPartTimeSearch.addEventListener('input', debouncePartTime(showsearchInputPartTimeOccupationSearch, 300));




document.addEventListener('click', function(event) {
    const clickedSuggestionPartTime = event.target.closest('.suggestion-item');
    if (clickedSuggestionPartTime) {
        searchInputPartTimeSearch.value = clickedSuggestionPartTime.textContent;
        suggestionsOccupationSearchContainerPartTime.style.display = 'none';

        // Filter and display cardsPartTime based on selected property and city
        const selectedPartTime = searchInputPartTimeSearch.value.toLowerCase();
        const selectedCityPartTime = currentPlacePartTime5.name || '';

        displayFilteredcardsPartTime(selectedCityPartTime, selectedPartTime);
    } else if (!event.target.closest('#searchInputPartTimeSearch') && !event.target.closest('#suggestionsOccupationSearchContainerPartTime')) {
        suggestionsOccupationSearchContainerPartTime.style.display = 'none';
    }
});

function showsearchInputPartTimeOccupationSearch() {
    const inputValuePartTime = searchInputPartTimeSearch.value.toLowerCase();
    const filteredsuggestionsListPartTimeSearch = arrayPartTime.filter(suggestion => suggestion.toLowerCase().includes(inputValuePartTime));

    if (filteredsuggestionsListPartTimeSearch.length > 0) {
        const suggestionList = filteredsuggestionsListPartTimeSearch.map(suggestion => `<div class="suggestion-item">${suggestion}</div>`).join('');
        suggestionsOccupationSearchContainerPartTime.innerHTML = suggestionList;
        suggestionsOccupationSearchContainerPartTime.style.display = 'block';
    } else {
        suggestionsOccupationSearchContainerPartTime.style.display = 'none';
    }
}

// Allow Location
let locationButtonPartTime = document.getElementById("locationButtonPartTime");
let locationDivPartTime = document.getElementById("locationDivPartTime");

const showLocationPartTime = async (position) => {
    try {
        let timestampPartTime = new Date().getTime();
        let responsePartTime = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json&_=${timestampPartTime}`);

        if (!responsePartTime.ok) {
            throw new Error(`Error: ${responsePartTime.status} - ${responsePartTime.statusText}`);
        }

        let data = await responsePartTime.json();
        console.log(data);

        let village = data.address.village || 'N/A';
        let road = data.address.road || 'N/A';
        let area1 = data.address.suburb || data.address.neighbourhood || data.address.city_district || 'N/A';
        let pincode1 = data.address.postcode || 'N/A';

        let city = data.address.city;
        if (city === undefined) {
            city = data.address.name;
        }
        let area = data.address.road;
        let pincode = data.address.postcode;

        console.log(city);
        console.log(area);
        console.log(pincode);
    } catch (error) {
        console.error("Error fetching location:", error);
        locationDivPartTime.innerText = "Error fetching location. Please try again later.";
    }
};

const checkErrorPartTime = (error) => {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            locationDivPartTime.innerText = "Please allow access to location.";
            break;
        case error.POSITION_UNAVAILABLE:
            locationDivPartTime.innerText = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            locationDivPartTime.innerText = "The request to get user location timed out.";
            break;
    }
};

locationButtonPartTime.addEventListener("click", () => {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showLocationPartTime, checkErrorPartTime);
    } else {
        locationDivPartTime.innerText = "The browser does not support geolocation.";
    }
});

// Initial Display of All cardsPartTime
displayAllcardsPartTime();









//  section 14 user registration form for location

let locationfield1 = document.getElementById("locationfield1");
let locationfield2 = document.getElementById("locationfield2");
let locationfield3 = document.getElementById("locationfield3");
let locationfield4 = document.getElementById("locationfield4");
let locationfield5 = document.getElementById("locationfield5");
let locationfield6 = document.getElementById("locationfield6");
let locationfield7 = document.getElementById("citySearchLocation");
let locationfield8 = document.getElementById("roadSearchInputLocation");
let locationfield9 = document.getElementById("locationfield9");
let locationfield10 = document.getElementById("searchInputOccupationRegLocation");
let locationfield11 = document.getElementById("locationfield11");
let locationfield12 = document.getElementById("locationfield12");


document.addEventListener("DOMContentLoaded", function() {
    const locationBusinessDetails = {};

    function updatelocationBusinessDetails() {
        locationfield1.disabled = false;
        // Retrieve values using element IDs
        let valueLocation1 = document.getElementById("locationfield1").value;
        let valueLocation2 = document.getElementById("locationfield2").value;
        let valueLocation3 = document.getElementById("locationfield3").value;
        let valueLocation4 = document.getElementById("locationfield4").value;
        let valueLocation5 = document.getElementById("locationfield5").value;
        let valueLocation6 = document.getElementById("locationfield6").value;
        let valueLocation7 = document.getElementById("citySearchLocation").value;
        let valueLocation8 = document.getElementById("roadSearchInputLocation").value;
        let valueLocation9 = document.getElementById("locationfield9").value;
        let valueLocation10 = document.getElementById("searchInputOccupationRegLocation").value;
        let valueLocation11 = document.getElementById("locationfield11").value;
        let valueLocation12 = document.getElementById("locationfield12").value;

        // Update locationBusinessDetails object
        locationBusinessDetails["email"] = valueLocation1;
        locationBusinessDetails["shopname"] = valueLocation2;
        locationBusinessDetails["opensinaweek"] = valueLocation3;
        locationBusinessDetails["openat"] = valueLocation4;
        locationBusinessDetails["closesat"] = valueLocation5;
        locationBusinessDetails["phoneno"] = valueLocation6;
        locationBusinessDetails["city"] = valueLocation7;
        locationBusinessDetails["areaLocation"] = valueLocation8;
        locationBusinessDetails["state"] = valueLocation9;
        locationBusinessDetails["type"] = valueLocation10;
        locationBusinessDetails["pincodeLocation"] = valueLocation11;
        locationBusinessDetails["special"] = valueLocation12;
        locationBusinessDetails["locationRegistrationStatus"] = true;

        // Update businessSignUpDataArray based on email match
        for (let i = 0; i < businessSignUpDataArray.length; i++) {
            if (businessSignUpDataArray[i].username === locationBusinessDetails.email) {
                businessSignUpDataArray[i].locationBusinessDetails =
                    businessSignUpDataArray[i].locationBusinessDetails || {};
                businessSignUpDataArray[i].locationBusinessDetails = locationBusinessDetails;
                console.log(businessSignUpDataArray[i]);
                updateBusinessLocalStorage();
            }
        }
    }

    function handleSubmitLocation(event) {
        event.preventDefault();
        updatelocationBusinessDetails();
        alert("account created");
        businessHomeLocation();
        display19();
        clearLocation();

    }

    const submitButtonLocation = document.getElementById("submitButtonLocation");
    submitButtonLocation.addEventListener("click", handleSubmitLocation);

    const formRegCityAllLocation = document.getElementById("formRegCityAllLocation");
    const nextBtnLocation = document.getElementById("nextBtnLocation");
    const backBtnLocation = document.getElementById("backBtnLocation");
    const allInputLocation = formRegCityAllLocation.querySelectorAll(".first input");

    nextBtnLocation.addEventListener("click", () => {
        let allInputLocationsFilled = true;
        allInputLocation.forEach((input) => {
            if (input.value === "") {
                allInputLocationsFilled = false;
            }
        });

        if (allInputLocationsFilled) {
            formRegCityAllLocation.classList.add("secActive");
        } else {
            formRegCityAllLocation.classList.remove("secActive");
        }
    });

    backBtnLocation.addEventListener("click", () =>
        formRegCityAllLocation.classList.remove("secActive")
    );
});






// city search 

const citySearchLocation = document.getElementById('citySearchLocation');
const citySuggestionsListLocation = document.getElementById('citySuggestionsListLocation');

let currentPlaceLocation = {};

function handleCitySuggestionClickLocation(place) {
    console.log('Selected City:', place);

    let cityLocation = place.address.city || place.address.name;

    citySearchLocation.value = cityLocation;

    currentPlaceLocation = {
        name: place.display_name,
        pincodeLocation: place.address.postcode
    };

    let areaLocation = place.display_place;
    let streetLocation = place.address.road;
    let pincodeLocation = place.address.postcode;

    console.log(cityLocation);
    console.log(areaLocation);
    console.log(streetLocation);
    console.log(pincodeLocation);

    citySuggestionsListLocation.innerHTML = '';
}

function debounceCityLocation(func, delay) {
    let timeoutIdLocation;
    return function() {
        clearTimeout(timeoutIdLocation);
        timeoutIdLocation = setTimeout(func, delay);
    };
}

function handleCityInputLocation() {
    const searchTermLocation = citySearchLocation.value.trim();
    if (searchTermLocation.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermLocation}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                citySuggestionsListLocation.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleCitySuggestionClickLocation(place));
                    citySuggestionsListLocation.appendChild(li);
                });

                citySuggestionsListLocation.style.display = 'block';
            })
            .catch(error => console.error('Error getting city suggestions:', error));
    } else {
        citySuggestionsListLocation.style.display = 'none';
    }
}

citySuggestionsListLocation.style.display = 'none';

citySearchLocation.addEventListener('input', debounceCityLocation(handleCityInputLocation, 300));

document.addEventListener('click', (event) => {
    if (event.target !== citySearchLocation && event.target !== citySuggestionsListLocation) {
        citySuggestionsListLocation.style.display = 'none';
    }
});

// Road search

const roadSearchInputLocation = document.getElementById('roadSearchInputLocation');
const roadSearchSuggestionsLocationList = document.getElementById('roadSearchSuggestionsLocation');

let currentPlaceLocation1 = {};

function handleRoadSuggestionClickLocation(place) {
    console.log('Selected Road:', place);

    let areaLocation = place.display_place;

    roadSearchInputLocation.value = areaLocation;

    currentPlaceLocation1 = {
        name: place.display_name,
        pincodeLocation: place.address.postcode
    };

    let cityLocation = place.address.city || place.address.name;
    let streetLocation = place.address.road;
    let pincodeLocation = place.address.postcode;

    console.log(cityLocation);
    console.log(areaLocation);
    console.log(streetLocation);
    console.log(pincodeLocation);

    roadSearchSuggestionsLocationList.innerHTML = '';
}

function debounceRoadLocation(func, delay) {
    let timeoutIdLocation;
    return function() {
        clearTimeout(timeoutIdLocation);
        timeoutIdLocation = setTimeout(func, delay);
    };
}

function handleRoadInputLocation() {
    const searchTermLocation = roadSearchInputLocation.value.trim();
    if (searchTermLocation.length >= 2) {

        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermLocation}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {

                roadSearchSuggestionsLocationList.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleRoadSuggestionClickLocation(place));
                    roadSearchSuggestionsLocationList.appendChild(li);
                });

                roadSearchSuggestionsLocationList.style.display = 'block';
            })
            .catch(error => console.error('Error getting road suggestions:', error));
    } else {
        roadSearchSuggestionsLocationList.style.display = 'none';
    }
}

roadSearchSuggestionsLocationList.style.display = 'none';

roadSearchInputLocation.addEventListener('input', debounceRoadLocation(handleRoadInputLocation, 300));

document.addEventListener('click', (event) => {
    if (event.target !== roadSearchInputLocation && event.target !== roadSearchSuggestionsLocationList) {
        roadSearchSuggestionsLocationList.style.display = 'none';
    }
});







//occupation search

const arrayOccupationRegLocation = ["Fancy shop", "Street Foods", "Food Court", "Cloth shop", "Mall", "Carpentor shop", "Welder shop", "Book store", "Bakery", "Groceries shop", "Pan shop", "Plumber Shop", "Bricks shop", "Electrical shop", "Restaurant", "Tiles shop", "Sweet Shop", "Furniture shop", "Drinks shop", "Bar", "Hotel", "Dhaba", "School", "College", "Tailor shop", "Mechanic shop", "Cement shop", "Phone show room", "Vegtables shop", "Super market", "Chicken and mutton Shop", "Fish and sea food", "Bag shop", "Sports shop", "Water plant", "Medical shop", "Fast foods shop", "Dry clinic", "Car showroom", "Bike showroom", "Petrol bunk", "Banks", "Goldsmith", "Blacksmith", "Paint shop", "Sandal shop", "Hospitals", "Gas company", "Cycle showroom", "Pestiside shops", "Government office", "Library", "Temples", "Steel shop", "Internet center", "Busstand", "Railway station", "Air port", "Watch shop", "Auto Stand", "Nursery", "Iron shop", "Mess and fencing shop", "Paper shop", "Gym", "Cinema theater", "Parks", "Stadium", "Zoo", "Tourist place", "Glass shop", "Mesuem", "Photo shop", "Delivery shop", "ATM", "Gift shop", "Saloon shop"];
const searchInputOccupationRegLocation = document.getElementById("searchInputOccupationRegLocation");
const suggestionsContainerOccupationRegLocation = document.getElementById("suggestionsContainerOccupationRegLocation");

document.addEventListener('click', function(event) {
    const clickedSuggestionLocation = event.target.closest('.suggestion-itemOccupationReg');
    if (clickedSuggestionLocation) {
        searchInputOccupationRegLocation.value = clickedSuggestionLocation.textContent;
        suggestionsContainerOccupationRegLocation.style.display = 'none';
    } else if (!event.target.closest('#searchInputOccupationRegLocation') && !event.target.closest('#suggestionsContainerOccupationRegLocation')) {
        suggestionsContainerOccupationRegLocation.style.display = 'none';
    }
});

function handleOccupationSuggestionClickLocation(suggestion) {
    searchInputOccupationRegLocation.value = suggestion;
    suggestionsContainerOccupationRegLocation.style.display = 'none';
}

function updateOccupationSuggestionsLocation(filteredSuggestionsLocation) {
    if (filteredSuggestionsLocation.length > 0) {
        const suggestionListLocation = filteredSuggestionsLocation.map(suggestion => `<div class="suggestion-itemOccupationReg" onclick="handleOccupationSuggestionClickLocation('${suggestion}')">${suggestion}</div>`).join('');
        suggestionsContainerOccupationRegLocation.innerHTML = suggestionListLocation;
        suggestionsContainerOccupationRegLocation.style.display = 'block';
    } else {
        suggestionsContainerOccupationRegLocation.style.display = 'none';
    }
}

function showSuggestionsOccupationRegLocation() {
    const inputValueLocation = searchInputOccupationRegLocation.value.toLowerCase();
    const filteredSuggestionsLocation = arrayOccupationRegLocation.filter(suggestion => suggestion.toLowerCase().includes(inputValueLocation));
    updateOccupationSuggestionsLocation(filteredSuggestionsLocation);
}



// section 15 location for user home page 


// Home Container
let homeContainerLocation = document.getElementById("homeContainerLocation");

// Function to Create cardsLocation
function cardsLocation(item) {
    let div1 = document.createElement("div");
    div1.classList.add("card21", "d-flex", "flex-row", "m-2");
    homeContainerLocation.appendChild(div1);

    let div2 = document.createElement("div");
    div1.appendChild(div2);

    let ionIcon = document.createElement("ion-icon");
    ionIcon.setAttribute('name', 'home-outline');
    ionIcon.classList.add("image", "mt-5");
    div2.appendChild(ionIcon);

    let div3 = document.createElement("div");
    div3.classList.add("ml-4");
    div1.appendChild(div3);

    let span1 = document.createElement("span");
    span1.classList.add("homeCardHead")
    span1.textContent = item.locationBusinessDetails.shopname;
    div3.appendChild(span1);

    let break1 = document.createElement("br");
    div3.appendChild(break1);

    let span2 = document.createElement("span");
    span2.textContent = item.locationBusinessDetails.phoneno;
    div3.appendChild(span2);

    let break2 = document.createElement("br");
    div3.appendChild(break2);

    let span3 = document.createElement("span");
    span3.textContent = item.locationBusinessDetails.type;
    div3.appendChild(span3);

    let break3 = document.createElement("br");
    div3.appendChild(break3);



    let span5 = document.createElement("span");
    span5.textContent = item.locationBusinessDetails.opensinaweek;
    div3.appendChild(span5);

    let break5 = document.createElement("br");
    div3.appendChild(break5);

    let span6 = document.createElement("span");
    span6.textContent = "Special : " + item.locationBusinessDetails.special;
    div3.appendChild(span6);

    let break6 = document.createElement("br");
    div3.appendChild(break6);

    let span7 = document.createElement("span");
    span7.textContent = "Vacancies: " + item.locationBusinessDetails.state;
    div3.appendChild(span7);

    let break7 = document.createElement("br");
    div3.appendChild(break7);


    let span8 = document.createElement("span");
    span8.textContent = item.locationBusinessDetails.city + ", " + item.locationBusinessDetails.areaLocation + ", " + item.locationBusinessDetails.pincodeLocation;
    div3.appendChild(span8);


}

// Display All cardsLocation Initially
function displayAllcardsLocation() {
    for (let item of businessSignUpDataArray) {
        if (item.locationBusinessDetails !== undefined) {
            console.log(item);
            cardsLocation(item);
        }
    }
}

// Function to Display Filtered cardsLocation
function displayFilteredcardsLocation(selectedCityLocation, selectedLocation) {
    console.log("Selected City:", selectedCityLocation);
    console.log("Selected property:", selectedLocation);

    const cityFilteredArrayLocation = businessSignUpDataArray.filter(item =>
        item.locationBusinessDetails &&
        item.locationBusinessDetails.city &&
        selectedCityLocation.toLowerCase().includes(item.locationBusinessDetails.city.toLowerCase())
    );

    console.log("City Filtered Array:", cityFilteredArrayLocation);

    homeContainerLocation.innerHTML = '';

    // If city search is empty, filter cards in all cards
    if (!selectedCityLocation) {
        for (let item of businessSignUpDataArray) {
            if (item.locationBusinessDetails) {
                console.log("Type in Data:", item.locationBusinessDetails.type);

                const LocationMatches = !selectedLocation ||
                    (item.locationBusinessDetails.type &&
                        item.locationBusinessDetails.type.toLowerCase().includes(selectedLocation.toLowerCase()));

                console.log("Type Matches:", LocationMatches);

                if (LocationMatches) {
                    cardsLocation(item);
                }
            }
        }
    } else {
        // Otherwise, filter cards based on selected city and property
        for (let item of cityFilteredArrayLocation) {
            if (item.locationBusinessDetails) {
                console.log("Type in Data:", item.locationBusinessDetails.type);

                const LocationMatches = !selectedLocation ||
                    (item.locationBusinessDetails.type &&
                        item.locationBusinessDetails.type.toLowerCase().includes(selectedLocation.toLowerCase()));

                console.log("Type Matches:", LocationMatches);

                if (LocationMatches) {
                    cardsLocation(item);
                }
            }
        }
    }
}





// Location Search
const searchInputLocation = document.getElementById('searchInputLocation');
const suggestionsListLocation = document.getElementById('suggestionsListLocation');
let currentPlaceLocationCard = {};

function handleSuggestionClickLocation(place) {
    searchInputLocation.value = `${place.display_name}, ${place.address.postcode}`;

    currentPlaceLocationCard = {
        name: place.display_name,
        pincode: place.address.postcode
    };

    const selectedCityLocation = place.address.city || place.address.name;
    homeContainerLocation.innerHTML = '';

    businessSignUpDataArray.forEach(item => {
        if (item.locationBusinessDetails && item.locationBusinessDetails.city.includes(selectedCityLocation) && item.locationBusinessDetails.locationRegistrationStatus === true) {
            cardsLocation(item);
        }
    });

    searchInputLocationSearch.value = '';

    suggestionsListLocation.innerHTML = '';
}

function debounceLocation(func, delay) {
    let timeoutIdLocation;
    return function() {
        clearTimeout(timeoutIdLocation);
        timeoutIdLocation = setTimeout(func, delay);
    };
}

function handleInputLocation() {
    const searchTermPartTime = searchInputLocation.value.trim();
    if (searchTermPartTime.length >= 2) {
        const apiUrl = `https://us1.locationiq.com/v1/autocomplete.php?key=pk.8bbe50a42004401570a4c08ad0e05f89&q=${searchTermPartTime}`;

        fetch(apiUrl)
            .then(responseLocation => responseLocation.json())
            .then(data => {
                suggestionsListLocation.innerHTML = '';

                data.forEach(place => {
                    const li = document.createElement('li');
                    li.textContent = place.display_name;
                    li.addEventListener('click', () => handleSuggestionClickLocation(place));
                    suggestionsListLocation.appendChild(li);
                });

                suggestionsListLocation.style.display = 'block';
            })
            .catch(error => console.error('Error getting suggestionsListLocation:', error));
    } else {
        suggestionsListLocation.style.display = 'none';
    }
}

suggestionsListLocation.style.display = 'none';

searchInputLocation.addEventListener('click', handleInputLocation);
searchInputLocation.addEventListener('input', debounceLocation(handleInputLocation, 300));
searchInputLocation.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        let village = searchInputLocation.value;
        console.log(village);
        if (currentPlaceLocationCard.name && currentPlaceLocationCard.pincode) {
            console.log('Current Place:', currentPlaceLocationCard);
        }

        suggestionsListLocation.innerHTML = '';
    }
});

document.addEventListener('click', (event) => {
    if (event.target !== searchInputLocation && event.target !== suggestionsListLocation) {
        suggestionsListLocation.style.display = 'none';
    }
});

// property Search
const arrayLocation = ["Fancy shop", "Street Foods", "Food Court", "Cloth shop", "Mall", "Carpentor shop", "Welder shop", "Book store", "Bakery", "Groceries shop", "Pan shop", "Plumber Shop", "Bricks shop", "Electrical shop", "Restaurant", "Tiles shop", "Sweet Shop", "Furniture shop", "Drinks shop", "Bar", "Hotel", "Dhaba", "School", "College", "Tailor shop", "Mechanic shop", "Cement shop", "Phone show room", "Vegtables shop", "Super market", "Chicken and mutton Shop", "Fish and sea food", "Bag shop", "Sports shop", "Water plant", "Medical shop", "Fast foods shop", "Dry clinic", "Car showroom", "Bike showroom", "Petrol bunk", "Banks", "Goldsmith", "Blacksmith", "Paint shop", "Sandal shop", "Hospitals", "Gas company", "Cycle showroom", "Pestiside shops", "Government office", "Library", "Temples", "Steel shop", "Internet center", "Busstand", "Railway station", "Air port", "Watch shop", "Auto Stand", "Nursery", "Iron shop", "Mess and fencing shop", "Paper shop", "Gym", "Cinema theater", "Parks", "Stadium", "Zoo", "Tourist place", "Glass shop", "Mesuem", "Photo shop", "Delivery shop", "ATM", "Gift shop", "Saloon shop"];
const searchInputLocationSearch = document.getElementById("searchInputLocationSearch");
const suggestionsOccupationSearchContainerLocation = document.getElementById("suggestionsOccupationSearchContainerLocation");

// Event listener for property Search
// Event listener for property Search
searchInputLocationSearch.addEventListener('input', debounceLocation(showsearchInputLocationOccupationSearch, 300));




document.addEventListener('click', function(event) {
    const clickedSuggestionLocation = event.target.closest('.suggestion-item');
    if (clickedSuggestionLocation) {
        searchInputLocationSearch.value = clickedSuggestionLocation.textContent;
        suggestionsOccupationSearchContainerLocation.style.display = 'none';

        // Filter and display cardsLocation based on selected property and city
        const selectedLocation = searchInputLocationSearch.value.toLowerCase();
        const selectedCityLocation = currentPlaceLocationCard.name || '';

        displayFilteredcardsLocation(selectedCityLocation, selectedLocation);
    } else if (!event.target.closest('#searchInputLocationSearch') && !event.target.closest('#suggestionsOccupationSearchContainerLocation')) {
        suggestionsOccupationSearchContainerLocation.style.display = 'none';
    }
});

function showsearchInputLocationOccupationSearch() {
    const inputValueLocation = searchInputLocationSearch.value.toLowerCase();
    const filteredsuggestionsListLocationSearch = arrayLocation.filter(suggestion => suggestion.toLowerCase().includes(inputValueLocation));

    if (filteredsuggestionsListLocationSearch.length > 0) {
        const suggestionListLocation = filteredsuggestionsListLocationSearch.map(suggestion => `<div class="suggestion-item">${suggestion}</div>`).join('');
        suggestionsOccupationSearchContainerLocation.innerHTML = suggestionListLocation;
        suggestionsOccupationSearchContainerLocation.style.display = 'block';
    } else {
        suggestionsOccupationSearchContainerLocation.style.display = 'none';
    }
}

// Allow Location
let locationButtonLocation = document.getElementById("locationButtonLocation");
let locationDivLocation = document.getElementById("locationDivLocation");

const showLocationLocation = async (position) => {
    try {
        let timestampLocation = new Date().getTime();
        let responseLocation = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json&_=${timestampLocation}`);

        if (!responseLocation.ok) {
            throw new Error(`Error: ${responseLocation.status} - ${responseLocation.statusText}`);
        }

        let data = await responseLocation.json();
        console.log(data);

        let villageLocation = data.address.village || 'N/A';
        let roadLocation = data.address.road || 'N/A';
        let area1Location = data.address.suburb || data.address.neighbourhood || data.address.city_district || 'N/A';
        let pincode1Location = data.address.postcode || 'N/A';

        let cityLocation = data.address.city;
        if (cityLocation === undefined) {
            cityLocation = data.address.name;
        }
        let area = data.address.road;
        let pincode = data.address.postcode;

        console.log(cityLocation);
        console.log(area);
        console.log(pincode);
    } catch (error) {
        console.error("Error fetching location:", error);
        locationDivLocation.innerText = "Error fetching location. Please try again later.";
    }
};

const checkErrorLocation = (error) => {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            locationDivLocation.innerText = "Please allow access to location.";
            break;
        case error.POSITION_UNAVAILABLE:
            locationDivLocation.innerText = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            locationDivLocation.innerText = "The request to get user location timed out.";
            break;
    }
};

locationButtonLocation.addEventListener("click", () => {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showLocationLocation, checkErrorLocation);
    } else {
        locationDivLocation.innerText = "The browser does not support geolocation.";
    }
});

// Initial Display of All cardsLocation
displayAllcardsLocation();



// section 16 Buisness home page for Skilled Workers 

let buttonSkillHelp = document.getElementById("buttonSkillHelp");
let buttonSkillUnHelp = document.getElementById("buttonSkillUnHelp");
let buttonSkillHelpPara = document.getElementById("buttonSkillHelpPara");
let buttonSkillUnHelpPara = document.getElementById("buttonSkillUnHelpPara");

let sk1 = document.getElementById("sk1");
let sk2 = document.getElementById("sk2");
let sk3 = document.getElementById("sk3");
let sk4 = document.getElementById("sk4");
let sk5 = document.getElementById("sk5");
let sk6 = document.getElementById("sk6");
let sk7 = document.getElementById("sk7");
let sk8 = document.getElementById("sk8");
let sk9 = document.getElementById("sk9");
let sk10 = document.getElementById("sk10");
let currentStatusPresent1 = document.getElementById("currentStatusPresent1");

function buttonSkillHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].workersBusinessDetails.skilledWorkersStatus = true;
            updateBusinessLocalStorage();
            currentStatusPresent1.textContent = ": Online";
            currentStatusPresent1.style.color = "green";
            currentStatusPresent1.classList.add("skilledStatusHead");
            buttonSkillHelpPara.classList.remove("d-none");
            buttonSkillUnHelpPara.classList.add("d-none");
        }
    }
}

function presentSkilledStatus() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            if (businessSignUpDataArray[i].workersBusinessDetails.skilledWorkersStatus === false) {
                currentStatusPresent1.textContent = ": Offline";
                currentStatusPresent1.style.color = "red";
                currentStatusPresent1.classList.add("skilledStatusHead");

                buttonSkillHelpPara.classList.add("d-none");
                buttonSkillUnHelpPara.classList.remove("d-none");
            } else {
                currentStatusPresent1.textContent = ": Online";
                currentStatusPresent1.style.color = "green";
                currentStatusPresent1.classList.add("skilledStatusHead");
                buttonSkillHelpPara.classList.remove("d-none");
                buttonSkillUnHelpPara.classList.add("d-none");
            }
        }
    }
}

function buttonSkillUnHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].workersBusinessDetails.skilledWorkersStatus = false;
            updateBusinessLocalStorage();
            console.log(businessSignUpDataArray[i].workersBusinessDetails.skilledWorkersStatus);
            currentStatusPresent1.textContent = ": Offline";
            currentStatusPresent1.style.color = "red";
            currentStatusPresent1.classList.add("skilledStatusHead");
            buttonSkillHelpPara.classList.add("d-none");
            buttonSkillUnHelpPara.classList.remove("d-none");
        }
    }
}


buttonSkillHelp.addEventListener("click", buttonSkillHelpFunc);

buttonSkillUnHelp.addEventListener("click", buttonSkillUnHelpFunc)


function businessHomeSkilled1() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            sk1.textContent = businessSignUpDataArray[i].workersBusinessDetails.email;
            sk2.textContent = businessSignUpDataArray[i].workersBusinessDetails.name;
            sk3.textContent = businessSignUpDataArray[i].workersBusinessDetails.age;
            sk4.textContent = businessSignUpDataArray[i].workersBusinessDetails.gender;
            sk5.textContent = businessSignUpDataArray[i].workersBusinessDetails["phone no"];
            sk6.textContent = businessSignUpDataArray[i].workersBusinessDetails.state;
            sk7.textContent = businessSignUpDataArray[i].workersBusinessDetails.city;
            sk8.textContent = businessSignUpDataArray[i].workersBusinessDetails.areaSkilled1;
            sk9.textContent = businessSignUpDataArray[i].workersBusinessDetails["pin code"];
            sk10.textContent = businessSignUpDataArray[i].workersBusinessDetails.occupation;
            if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
                if (businessSignUpDataArray[i].workersBusinessDetails.skilledWorkersStatus === false) {
                    currentStatusPresent1.textContent = ": Offline";
                    currentStatusPresent1.style.color = "red";
                    currentStatusPresent1.classList.add("skilledStatusHead");
                    buttonSkillHelpPara.classList.add("d-none");
                    buttonSkillUnHelpPara.classList.remove("d-none");
                } else {
                    currentStatusPresent1.textContent = ": Online";
                    currentStatusPresent1.style.color = "green";
                    currentStatusPresent1.classList.add("skilledStatusHead");
                    buttonSkillHelpPara.classList.remove("d-none");
                    buttonSkillUnHelpPara.classList.add("d-none");
                }
            }

        }
    }
}






// section 16.1 Buisness edit details for Skilled Workers registration

function preSkilledWorkers() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            field1.disabled = true;
            field1.value = businessSignUpDataArray[i].workersBusinessDetails.email;
            field2.value = businessSignUpDataArray[i].workersBusinessDetails.name;
            field3.value = businessSignUpDataArray[i].workersBusinessDetails.age;
            field4.value = businessSignUpDataArray[i].workersBusinessDetails.gender;
            field5.value = businessSignUpDataArray[i].workersBusinessDetails["phone no"];
            field6.value = businessSignUpDataArray[i].workersBusinessDetails.state;
            field7.value = businessSignUpDataArray[i].workersBusinessDetails.city;
            field8.value = businessSignUpDataArray[i].workersBusinessDetails.areaSkilled1;
            field9.value = businessSignUpDataArray[i].workersBusinessDetails["pin code"];
            field10.value = businessSignUpDataArray[i].workersBusinessDetails.occupation;
            display7();
        } else {
            console.log("not matched");
        }
    }
}

function Godisplay6() {
    field1.value = "";
    field2.value = "";
    field3.value = "";
    field4.value = "";
    field5.value = "";
    field6.value = "";
    field7.value = "";
    field8.value = "";
    field9.value = "";
    field10.value = "";
    display6();
}



// section 17 Buisness home page for property

let buttonPropertyHelp = document.getElementById("buttonPropertyHelp");
let buttonPropertyUnHelp = document.getElementById("buttonPropertyUnHelp");
let buttonPropertyHelpPara = document.getElementById("buttonPropertyHelpPara");
let buttonPropertyUnHelpPara = document.getElementById("buttonPropertyUnHelpPara");
let currentStatusPresent2 = document.getElementById("currentStatusPresent2");

let pr1 = document.getElementById("pr1");
let pr2 = document.getElementById("pr2");
let pr3 = document.getElementById("pr3");
let pr4 = document.getElementById("pr4");
let pr5 = document.getElementById("pr5");
let pr6 = document.getElementById("pr6");
let pr7 = document.getElementById("pr7");
let pr8 = document.getElementById("pr8");
let pr9 = document.getElementById("pr9");
let pr10 = document.getElementById("pr10");
let pr11 = document.getElementById("pr11");
let pr12 = document.getElementById("pr12");

function buttonPropertyHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus = true;
            updateBusinessLocalStorage();
            currentStatusPresent2.textContent = ": Online";
            currentStatusPresent2.style.color = "green";
            currentStatusPresent2.classList.add("skilledStatusHead");
            buttonPropertyHelpPara.classList.remove("d-none");
            buttonPropertyUnHelpPara.classList.add("d-none");
        }
    }
}

function presentSkilledStatus() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            if (businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus === false) {
                buttonPropertyHelpPara.classList.add("d-none");
                buttonPropertyUnHelpPara.classList.remove("d-none");
            } else {
                buttonPropertyHelpPara.classList.remove("d-none");
                buttonPropertyUnHelpPara.classList.add("d-none");
            }
        }
    }
}

function buttonPropertyUnHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus = false;
            updateBusinessLocalStorage();
            console.log(businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus);
            currentStatusPresent2.textContent = ": Offline";
            currentStatusPresent2.style.color = "red";
            currentStatusPresent2.classList.add("skilledStatusHead");
            buttonPropertyHelpPara.classList.add("d-none");
            buttonPropertyUnHelpPara.classList.remove("d-none");
        }
    }
}


buttonPropertyHelp.addEventListener("click", buttonPropertyHelpFunc);

buttonPropertyUnHelp.addEventListener("click", buttonPropertyUnHelpFunc);


function businessHomeProperty() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            pr1.textContent = businessSignUpDataArray[i].propertyBusinessDetails.email;
            pr2.textContent = businessSignUpDataArray[i].propertyBusinessDetails.name;
            pr3.textContent = businessSignUpDataArray[i].propertyBusinessDetails.age;
            pr4.textContent = businessSignUpDataArray[i].propertyBusinessDetails.members;
            pr5.textContent = businessSignUpDataArray[i].propertyBusinessDetails["phoneno"];
            pr6.textContent = businessSignUpDataArray[i].propertyBusinessDetails.state;
            pr7.textContent = businessSignUpDataArray[i].propertyBusinessDetails.city;
            pr8.textContent = businessSignUpDataArray[i].propertyBusinessDetails.areaProperty;
            pr9.textContent = businessSignUpDataArray[i].propertyBusinessDetails["pincode"];
            pr10.textContent = businessSignUpDataArray[i].propertyBusinessDetails.property;
            pr11.textContent = businessSignUpDataArray[i].propertyBusinessDetails.type;
            pr12.textContent = businessSignUpDataArray[i].propertyBusinessDetails.estimatedcost;
            if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
                if (businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus === false) {
                    buttonPropertyHelpPara.classList.add("d-none");
                    buttonPropertyUnHelpPara.classList.remove("d-none");
                    currentStatusPresent2.textContent = ": Offline";
                    currentStatusPresent2.style.color = "red";
                    currentStatusPresent2.classList.add("skilledStatusHead");
                } else {
                    currentStatusPresent2.textContent = ": Online";
                    currentStatusPresent2.style.color = "green";
                    currentStatusPresent2.classList.add("skilledStatusHead");
                    buttonPropertyHelpPara.classList.remove("d-none");
                    buttonPropertyUnHelpPara.classList.add("d-none");
                }
            }
        }
    }
}


// section 17.1 


function preProperty() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            propertyValue1.disabled = true;
            propertyValue1.value = businessSignUpDataArray[i].propertyBusinessDetails.email;
            propertyValue2.value = businessSignUpDataArray[i].propertyBusinessDetails.name;
            propertyValue3.value = businessSignUpDataArray[i].propertyBusinessDetails.age;
            propertyValue4.value = businessSignUpDataArray[i].propertyBusinessDetails.members;
            propertyValue5.value = businessSignUpDataArray[i].propertyBusinessDetails["phoneno"];
            propertyValue6.value = businessSignUpDataArray[i].propertyBusinessDetails.state;
            propertyValue7.value = businessSignUpDataArray[i].propertyBusinessDetails.city;
            propertyValue8.value = businessSignUpDataArray[i].propertyBusinessDetails.areaProperty;
            propertyValue9.value = businessSignUpDataArray[i].propertyBusinessDetails["pincode"];
            propertyValue10.value = businessSignUpDataArray[i].propertyBusinessDetails.property;
            propertyValue11.value = businessSignUpDataArray[i].propertyBusinessDetails.type;
            propertyValue12.value = businessSignUpDataArray[i].propertyBusinessDetails.estimatedcost;
            display10()
        } else {
            console.log("not matched");
        }
    }
}



function clearProperty() {
    propertyValue1.value = "";
    propertyValue2.value = "";
    propertyValue3.value = "";
    propertyValue4.value = "";
    propertyValue5.value = "";
    propertyValue6.value = "";
    propertyValue7.value = "";
    propertyValue8.value = "";
    propertyValue9.value = "";
    propertyValue10.value = "";
    propertyValue11.value = "";
    propertyValue12.value = "";
}



//  section 18 Buisness home page for Part Time

// section 18 Buisness home page for Part Time 


let buttonPartTimeHelp = document.getElementById("buttonPartTimeHelp");
let buttonPartTimeUnHelp = document.getElementById("buttonPartTimeUnHelp");
let buttonPartTimeHelpPara = document.getElementById("buttonPartTimeHelpPara");
let buttonPartTimeUnHelpPara = document.getElementById("buttonPartTimeUnHelpPara");

let PT1 = document.getElementById("PT1");
let PT2 = document.getElementById("PT2");
let PT3 = document.getElementById("PT3");
let PT4 = document.getElementById("PT4");
let PT5 = document.getElementById("PT5");
let PT6 = document.getElementById("PT6");
let PT7 = document.getElementById("PT7");
let PT8 = document.getElementById("PT8");
let PT9 = document.getElementById("PT9");
let PT10 = document.getElementById("PT10");
let PT11 = document.getElementById("PT11");
let currentStatusPresent3 = document.getElementById("currentStatusPresent3");

function buttonPartTimeHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].partTimeBusinessDetails.partTimeBusinessRegistrationStatus = true;
            updateBusinessLocalStorage();
            currentStatusPresent3.textContent = ": Online";
            currentStatusPresent3.classList.style.color = "green";
            currentStatusPresent3.classList.add("skilledStatusHead");
            buttonPartTimeHelpPara.classList.remove("d-none");
            buttonPartTimeUnHelpPara.classList.add("d-none");
        }
    }
}

function presentSkilledStatus() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            if (businessSignUpDataArray[i].partTimeBusinessDetails.partTimeBusinessRegistrationStatus === false) {
                buttonPartTimeHelpPara.classList.add("d-none");
                buttonPartTimeUnHelpPara.classList.remove("d-none");
            } else {
                buttonPartTimeHelpPara.classList.remove("d-none");
                buttonPartTimeUnHelpPara.classList.add("d-none");
            }
        }
    }
}

function buttonPartTimeUnHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].partTimeBusinessDetails.partTimeBusinessRegistrationStatus = false;
            updateBusinessLocalStorage();
            currentStatusPresent3.textContent = ": Offline";
            currentStatusPresent3.classList.style.color = "red";
            currentStatusPresent3.classList.add("skilledStatusHead");
            buttonPartTimeHelpPara.classList.add("d-none");
            buttonPartTimeUnHelpPara.classList.remove("d-none");
        }
    }
}


buttonPartTimeHelp.addEventListener("click", buttonPartTimeHelpFunc);

buttonPartTimeUnHelp.addEventListener("click", buttonPartTimeUnHelpFunc);


function businessHomePartTime() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            PT1.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.email;
            PT2.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.specific;
            PT3.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.shopOrCompanyName;
            PT4.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.type;
            PT5.textContent = businessSignUpDataArray[i].partTimeBusinessDetails["phoneno"];
            PT6.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.state;
            PT7.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.city;
            PT8.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.area;
            PT9.textContent = businessSignUpDataArray[i].partTimeBusinessDetails["pincode"];
            PT10.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.education;
            PT11.textContent = businessSignUpDataArray[i].partTimeBusinessDetails.salary;
            if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
                if (businessSignUpDataArray[i].partTimeBusinessDetails.partTimeBusinessRegistrationStatus === false) {
                    currentStatusPresent3.textContent = ": Offline";
                    currentStatusPresent3.classList.style.color = "red";
                    currentStatusPresent3.classList.add("skilledStatusHead");
                    buttonPartTimeHelpPara.classList.add("d-none");
                    buttonPartTimeUnHelpPara.classList.remove("d-none");
                } else {
                    currentStatusPresent3.textContent = ": Online";
                    currentStatusPresent3.classList.style.color = "green";
                    currentStatusPresent3.classList.add("skilledStatusHead");
                    buttonPartTimeHelpPara.classList.remove("d-none");
                    buttonPartTimeUnHelpPara.classList.add("d-none");
                }
            }


        }
    }
}

// 18.1


function prePartTime() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            valuePartTime1.disabled = true;
            valuePartTime1.value = businessSignUpDataArray[i].partTimeBusinessDetails.email;
            valuePartTime2.value = businessSignUpDataArray[i].partTimeBusinessDetails.specific;
            valuePartTime3.value = businessSignUpDataArray[i].partTimeBusinessDetails.shopOrCompanyName;
            valuePartTime4.value = businessSignUpDataArray[i].partTimeBusinessDetails.type;
            valuePartTime5.value = businessSignUpDataArray[i].partTimeBusinessDetails["phoneno"];
            valuePartTime6.value = businessSignUpDataArray[i].partTimeBusinessDetails.state;
            valuePartTime7.value = businessSignUpDataArray[i].partTimeBusinessDetails.city;
            valuePartTime8.value = businessSignUpDataArray[i].partTimeBusinessDetails.area;
            valuePartTime9.value = businessSignUpDataArray[i].partTimeBusinessDetails["pincode"];
            valuePartTime10.value = businessSignUpDataArray[i].partTimeBusinessDetails.education;
            valuePartTime11.value = businessSignUpDataArray[i].partTimeBusinessDetails.salary;
            display12();
        } else {
            console.log("not matched");
        }
    }
}


function clearPartTime() {
    valuePartTime1.value = "";
    valuePartTime2.value = "";
    valuePartTime3.value = "";
    valuePartTime4.value = "";
    valuePartTime5.value = "";
    valuePartTime6.value = "";
    valuePartTime7.value = "";
    valuePartTime8.value = "";
    valuePartTime9.value = "";
    valuePartTime10.value = "";
    valuePartTime11.value = "";
}



let backRegistration3 = document.getElementById("backRegistration3");

function GoDisplay3(event) {
    event.preventDefault();
    display6()
    valuePartTime1.value = "";
    valuePartTime2.value = "";
    valuePartTime3.value = "";
    valuePartTime4.value = "";
    valuePartTime5.value = "";
    valuePartTime6.value = "";
    valuePartTime7.value = "";
    valuePartTime8.value = "";
    valuePartTime9.value = "";
    valuePartTime10.value = "";
    valuePartTime11.value = "";
}


backRegistration3.addEventListener("click", GoDisplay3);






// section 19 Buisness home page for Location

let buttonLocationHelp = document.getElementById("buttonLocationHelp");
let buttonLocationUnHelp = document.getElementById("buttonLocationUnHelp");
let buttonLocationHelpPara = document.getElementById("buttonLocationHelpPara");
let buttonLocationUnHelpPara = document.getElementById("buttonLocationUnHelpPara");

let L1 = document.getElementById("L1");
let L2 = document.getElementById("L2");
let L3 = document.getElementById("L3");
let L4 = document.getElementById("L4");
let L5 = document.getElementById("L5");
let L6 = document.getElementById("L6");
let L7 = document.getElementById("L7");
let L8 = document.getElementById("L8");
let L9 = document.getElementById("L9");
let L10 = document.getElementById("L10");
let L11 = document.getElementById("L11");
let L12 = document.getElementById("L12");



function clearLocation() {
    locationfield1.value = "";
    locationfield2.value = "";
    locationfield3.value = "";
    locationfield4.value = "";
    locationfield5.value = "";
    locationfield6.value = "";
    locationfield7.value = "";
    locationfield8.value = "";
    locationfield9.value = "";
    locationfield10.value = "";
    locationfield11.value = "";
    locationfield12.value = "";
}





function buttonLocationHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus = true;
            updateBusinessLocalStorage();
            buttonLocationHelpPara.classList.remove("d-none");
            buttonLocationUnHelpPara.classList.add("d-none");
        }
    }
}

function presentLocationStatus() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            if (businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus === false) {
                buttonLocationHelpPara.classList.add("d-none");
                buttonLocationUnHelpPara.classList.remove("d-none");
            } else {
                buttonLocationHelpPara.classList.remove("d-none");
                buttonLocationUnHelpPara.classList.add("d-none");
            }
        }
    }
}

function buttonLocationUnHelpFunc() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus = false;
            updateBusinessLocalStorage();
            console.log(businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus);
            buttonLocationHelpPara.classList.add("d-none");
            buttonLocationUnHelpPara.classList.remove("d-none");
        }
    }
}


buttonLocationHelp.addEventListener("click", buttonLocationHelpFunc);

buttonLocationUnHelp.addEventListener("click", buttonLocationUnHelpFunc);


function businessHomeLocation() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            L1.textContent = businessSignUpDataArray[i].locationBusinessDetails.email;
            L2.textContent = businessSignUpDataArray[i].locationBusinessDetails.shopname;
            L3.textContent = businessSignUpDataArray[i].locationBusinessDetails.opensinaweek;
            L4.textContent = businessSignUpDataArray[i].locationBusinessDetails.openat;
            L5.textContent = businessSignUpDataArray[i].locationBusinessDetails["closesat"];
            L6.textContent = businessSignUpDataArray[i].locationBusinessDetails.phoneno;
            L7.textContent = businessSignUpDataArray[i].locationBusinessDetails.city;
            L8.textContent = businessSignUpDataArray[i].locationBusinessDetails.areaLocation;
            L9.textContent = businessSignUpDataArray[i].locationBusinessDetails["state"];
            L10.textContent = businessSignUpDataArray[i].locationBusinessDetails.type;
            L11.textContent = businessSignUpDataArray[i].locationBusinessDetails.pincodeLocation;
            L12.textContent = businessSignUpDataArray[i].locationBusinessDetails.special;

            if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
                if (businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus === false) {
                    buttonLocationHelpPara.classList.add("d-none");
                    buttonLocationUnHelpPara.classList.remove("d-none");
                } else {
                    buttonLocationHelpPara.classList.remove("d-none");
                    buttonLocationUnHelpPara.classList.add("d-none");
                }
            }
        }
    }
}

function preLocation() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (currentBusinessLogin1 === businessSignUpDataArray[i].username) {
            locationfield1.disabled = true;
            locationfield1.value = businessSignUpDataArray[i].locationBusinessDetails.email;
            locationfield2.value = businessSignUpDataArray[i].locationBusinessDetails.shopname;
            locationfield3.value = businessSignUpDataArray[i].locationBusinessDetails.opensinaweek;
            locationfield4.value = businessSignUpDataArray[i].locationBusinessDetails.openat;
            locationfield5.value = businessSignUpDataArray[i].locationBusinessDetails["closesat"];
            locationfield6.value = businessSignUpDataArray[i].locationBusinessDetails.phoneno;
            locationfield7.value = businessSignUpDataArray[i].locationBusinessDetails.city;
            locationfield8.value = businessSignUpDataArray[i].locationBusinessDetails.areaLocation;
            locationfield9.value = businessSignUpDataArray[i].locationBusinessDetails["state"];
            locationfield10.value = businessSignUpDataArray[i].locationBusinessDetails.type;
            locationfield11.value = businessSignUpDataArray[i].locationBusinessDetails.pincodeLocation;
            locationfield12.value = businessSignUpDataArray[i].locationBusinessDetails.special;
            display14();
        } else {
            console.log("not matched");
        }
    }
}






// final code segment



function Godisplay61() {
    propertyValue1.value = "";
    propertyValue2.value = "";
    propertyValue3.value = "";
    propertyValue4.value = "";
    propertyValue5.value = "";
    propertyValue6.value = "";
    propertyValue7.value = "";
    propertyValue8.value = "";
    propertyValue9.value = "";
    propertyValue10.value = "";
    propertyValue11.value = "";
    propertyValue12.value = "";
    display6();
}


function backToServiceFunction() {
    searchInputskilled.value = "";
    searchInputOccupationSearch.value = "";
    searchInputPartTime.value = "";
    searchInputPartTimeSearch.value = "";
    searchInputProperty2.value = ""
    searchInputpropertySearch.value = "";
    homeContainerSkilled.textContent = "";
    homeContainerProperty1.textContent = "";
    homeContainerPartTIme.textContent = "";
    searchInputLocation.value = "";
    searchInputLocationSearch.value = "";
    homeContainerLocation.textContent = "";
    displayAllskilledCardsSkilled();
    displayAllcardsPartTime();
    displayAllcardsProperty();
    displayAllcardsLocation();

    display8();
}


function nullEntered() {
    userLoginUserName.value = "";
    userLoginPassword.value = "";
    businessLoginUserName.value = "";
    businessLoginPassword.value = "";
    userSignUpUserName.value = "";
    userSignUpPassword.value = "";
    userSignUpConfirmPassword.value = "";
    businessSignUpUsername.value = "";
    businessSignUpPassword.value = "";


}

function clearSkiled() {
    field1.value = "";
    field2.value = "";
    field3.value = "";
    field4.value = "";
    field5.value = "";
    field6.value = "";
    field7.value = "";
    field8.value = "";
    field9.value = "";
    field10.value = "";

}

function goTodisplay9() {
    field1.value = "";
    field2.value = "";
    field3.value = "";
    field4.value = "";
    field5.value = "";
    field6.value = "";
    field7.value = "";
    field8.value = "";
    field9.value = "";
    field10.value = "";
    display9();
}

function GoTodisplay7() {
    currentBusinessLogin
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (businessSignUpDataArray[i].username === currentBusinessLogin) {
            if (businessSignUpDataArray[i].workersBusinessDetails === undefined) {
                field1.disabled = false;
                display7();
            } else {
                console.log(businessSignUpDataArray[i].workersBusinessDetails);
                alert("Already created");
                businessHomeSkilled1();
                display16();
            }
        }
    }
}

function GoTodisplay10() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (businessSignUpDataArray[i].username === currentBusinessLogin) {
            if (businessSignUpDataArray[i].propertyBusinessDetails === undefined) {
                display10();
            } else {
                console.log(businessSignUpDataArray[i].propertyBusinessDetails.propertyRegistrationStatus);
                alert("Already created");
                businessHomeProperty();
                display17();
            }
        }
    }
}


function GoTodisplay14() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (businessSignUpDataArray[i].username === currentBusinessLogin) {
            if (businessSignUpDataArray[i].locationBusinessDetails === undefined) {
                display14();
            } else {
                console.log(businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus);
                alert("Already created");
                businessHomeLocation();
                display19();
            }
        }
    }
}

function GoTodisplay12() {
    for (let i = 0; i < businessSignUpDataArray.length; i++) {
        if (businessSignUpDataArray[i].username === currentBusinessLogin) {
            if (businessSignUpDataArray[i].partTimeBusinessDetails === undefined) {
                display12();
            } else {
                console.log(businessSignUpDataArray[i].locationBusinessDetails.locationRegistrationStatus);
                alert("Already created");
                businessHomePartTime();
                display18();
            }
        }
    }
}